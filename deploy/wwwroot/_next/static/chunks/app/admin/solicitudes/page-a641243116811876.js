(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6724],{39198:function(e,t,a){Promise.resolve().then(a.bind(a,25499))},25499:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var r=a(57437),s=a(2265),d=a(11888),c=a(71837);function i(){let[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)(!0),[n,l]=(0,s.useState)("Pendiente");(0,s.useEffect)(()=>{x()},[n]);let x=async()=>{try{let e=new URLSearchParams;n&&e.append("estado",n);let a=await c.ZP.get("/solicitudes-registro?".concat(e));t(a.data)}catch(e){console.error("Error fetching solicitudes:",e)}finally{i(!1)}},o=async e=>{try{await c.ZP.put("/solicitudes-registro/".concat(e,"/aprobar")),x(),alert("Solicitud aprobada. Se ha enviado un correo con las credenciales temporales.")}catch(e){console.error("Error aprobando solicitud:",e)}},p=async e=>{if(confirm("Esta seguro de rechazar esta solicitud?"))try{await c.ZP.put("/solicitudes-registro/".concat(e,"/rechazar")),x()}catch(e){console.error("Error rechazando solicitud:",e)}},h=e=>({Pendiente:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",Aprobada:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",Rechazada:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"})[e]||"bg-gray-100 text-gray-800";return(0,r.jsx)(d.Zn,{requiredRoles:["Admin","Empleado"],children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Solicitudes de Registro"})}),(0,r.jsx)("div",{className:"card p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filtrar por estado:"}),(0,r.jsxs)("select",{className:"input w-48",value:n,onChange:e=>l(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Todos"}),(0,r.jsx)("option",{value:"Pendiente",children:"Pendiente"}),(0,r.jsx)("option",{value:"Aprobada",children:"Aprobada"}),(0,r.jsx)("option",{value:"Rechazada",children:"Rechazada"})]})]})}),(0,r.jsx)("div",{className:"card overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nombre"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Empresa"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fecha Solicitud"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:a?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"Cargando..."})}):0===e.length?(0,r.jsx)("tr",{children:(0,r.jsxs)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:["No hay solicitudes ",n?'con estado "'.concat(n,'"'):""]})}):e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.id}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white font-medium",children:e.nombre}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.email}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.empresaNombre}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(h(e.estado)),children:e.estado})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.fechaSolicitud).toLocaleDateString("es-ES")}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:"Pendiente"===e.estado?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>o(e.id),className:"text-green-600 hover:text-green-900 dark:text-green-400 font-medium",children:"Aprobar"}),(0,r.jsx)("button",{onClick:()=>p(e.id),className:"text-red-600 hover:text-red-900 dark:text-red-400",children:"Rechazar"})]}):(0,r.jsx)("span",{className:"text-gray-400 dark:text-gray-500",children:"Aprobada"===e.estado?"Aprobada por ".concat(e.aprobadoPorNombre||"Sistema"):"Rechazada"})})]},e.id))})]})})})]})})}},11888:function(e,t,a){"use strict";a.d(t,{Zn:function(){return r.Z}}),a(42530),a(57018);var r=a(81076)}},function(e){e.O(0,[7648,7859,3464,6137,1076,2971,2117,1744],function(){return e(e.s=39198)}),_N_E=e.O()}]);