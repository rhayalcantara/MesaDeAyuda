(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5370],{63344:function(e,t,a){Promise.resolve().then(a.bind(a,93625))},93625:function(e,t,a){"use strict";a.d(t,{default:function(){return x}});var r=a(57437),s=a(2265),i=a(99376),d=a(27648),l=a(11888),c=a(71837),n=a(69064);function x(){let e=(0,i.useParams)();(0,i.useRouter)();let t=parseInt(e.id),[a,x]=(0,s.useState)(null),[m,o]=(0,s.useState)([]),[h,g]=(0,s.useState)(!0);(0,s.useEffect)(()=>{y()},[t]);let y=async()=>{try{let[e,a]=await Promise.all([c.ZP.get("/empresas/".concat(t)),c.ZP.get("/empresas/".concat(t,"/clientes"))]);x(e.data),o(a.data)}catch(t){var e;console.error("Error fetching empresa:",t),(null===(e=t.response)||void 0===e?void 0:e.status)===404?x(null):n.ZP.error("Error al cargar empresa")}finally{g(!1)}},p=e=>new Intl.DateTimeFormat("es-ES",{dateStyle:"medium",timeStyle:"short"}).format(new Date(e));return h?(0,r.jsx)(l.Zn,{requiredRoles:["Admin"],children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}):a?(0,r.jsx)(l.Zn,{requiredRoles:["Admin"],children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("nav",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400","aria-label":"Breadcrumb",children:[(0,r.jsx)(d.default,{href:"/",className:"hover:text-primary-600 dark:hover:text-primary-400",children:"Inicio"}),(0,r.jsx)("svg",{className:"mx-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),(0,r.jsx)(d.default,{href:"/admin/empresas",className:"hover:text-primary-600 dark:hover:text-primary-400",children:"Empresas"}),(0,r.jsx)("svg",{className:"mx-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),(0,r.jsx)("span",{className:"text-gray-900 dark:text-white font-medium",children:a.nombre})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("div",{className:"w-12 h-12 rounded-lg flex items-center justify-center text-white font-bold text-xl",style:{backgroundColor:a.colorPrimario||"#2563eb"},children:a.nombre.charAt(0).toUpperCase()}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:a.nombre}),(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ".concat(a.activa?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"),children:a.activa?"Activa":"Inactiva"})]})]}),(0,r.jsx)("div",{className:"flex gap-2",children:(0,r.jsxs)(d.default,{href:"/admin/empresas/".concat(a.id,"/editar"),className:"btn-secondary flex items-center gap-2",children:[(0,r.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),"Editar"]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)("div",{className:"card p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Informacion de la Empresa"}),(0,r.jsxs)("dl",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:"ID"}),(0,r.jsx)("dd",{className:"mt-1 text-gray-900 dark:text-white font-medium",children:a.id})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Visibilidad de Tickets"}),(0,r.jsx)("dd",{className:"mt-1 text-gray-900 dark:text-white",children:"propios"===a.configVisibilidadTickets?"Solo tickets propios":"Todos los tickets de la empresa"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Color Primario"}),(0,r.jsxs)("dd",{className:"mt-1 flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:a.colorPrimario||"#2563eb"}}),(0,r.jsx)("span",{className:"text-gray-900 dark:text-white",children:a.colorPrimario||"#2563eb"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Fecha de Creacion"}),(0,r.jsx)("dd",{className:"mt-1 text-gray-900 dark:text-white",children:p(a.fechaCreacion)})]}),a.fechaActualizacion&&(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ultima Actualizacion"}),(0,r.jsx)("dd",{className:"mt-1 text-gray-900 dark:text-white",children:p(a.fechaActualizacion)})]})]})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Clientes (",m.length,")"]})})}),0===m.length?(0,r.jsx)("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"No hay clientes registrados para esta empresa."}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nombre"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fecha Registro"})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:m.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.nombre}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.email}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.activo?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"),children:e.activo?"Activo":"Inactivo"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.fechaCreacion).toLocaleDateString("es-ES")})]},e.id))})]})})]})]}),(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsxs)("div",{className:"card p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Estadisticas"}),(0,r.jsxs)("dl",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Clientes"}),(0,r.jsx)("dd",{className:"text-sm font-medium text-gray-900 dark:text-white",children:m.length})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Clientes Activos"}),(0,r.jsx)("dd",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:m.filter(e=>e.activo).length})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Clientes Inactivos"}),(0,r.jsx)("dd",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:m.filter(e=>!e.activo).length})]})]})]})})]})]})}):(0,r.jsx)(l.Zn,{requiredRoles:["Admin"],children:(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Empresa no encontrada"}),(0,r.jsx)(d.default,{href:"/admin/empresas",className:"btn-primary mt-4 inline-block",children:"Volver a empresas"})]})})}},11888:function(e,t,a){"use strict";a.d(t,{Zn:function(){return r.Z}}),a(42530),a(57018);var r=a(81076)}},function(e){e.O(0,[7648,7859,3464,6137,1076,2971,2117,1744],function(){return e(e.s=63344)}),_N_E=e.O()}]);