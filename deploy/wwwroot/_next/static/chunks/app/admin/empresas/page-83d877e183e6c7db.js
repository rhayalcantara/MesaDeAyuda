(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1286],{9957:function(e,a,t){Promise.resolve().then(t.bind(t,12923))},12923:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return n}});var r=t(57437),s=t(2265),i=t(27648),c=t(11888),d=t(71837),l=t(69064);function n(){let[e,a]=(0,s.useState)([]),[t,n]=(0,s.useState)(!0),[o,x]=(0,s.useState)(!1),[m,p]=(0,s.useState)(null),[h,u]=(0,s.useState)({nombre:"",configVisibilidadTickets:"propios",colorPrimario:"#2563eb",activa:!0});(0,s.useEffect)(()=>{g()},[]);let g=async()=>{try{let e=await d.ZP.get("/empresas");a(e.data)}catch(e){console.error("Error fetching empresas:",e),l.ZP.error("Error al cargar empresas")}finally{n(!1)}},y=async e=>{e.preventDefault();try{m?(await d.ZP.put("/empresas/".concat(m.id),h),l.ZP.success("Empresa actualizada exitosamente")):(await d.ZP.post("/empresas",h),l.ZP.success("Empresa creada exitosamente")),g(),x(!1),k()}catch(e){var a,t;console.error("Error saving empresa:",e),l.ZP.error((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||"Error al guardar empresa")}},b=e=>{p(e),u({nombre:e.nombre,configVisibilidadTickets:e.configVisibilidadTickets,colorPrimario:e.colorPrimario||"#2563eb",activa:e.activa}),x(!0)},v=async e=>{try{await d.ZP.put("/empresas/".concat(e.id,"/toggle-activa")),l.ZP.success("Empresa ".concat(e.activa?"desactivada":"activada"," exitosamente")),g()}catch(e){var a,t;console.error("Error toggling empresa:",e),l.ZP.error((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||"Error al cambiar estado")}},k=()=>{p(null),u({nombre:"",configVisibilidadTickets:"propios",colorPrimario:"#2563eb",activa:!0})};return(0,r.jsxs)(c.Zn,{requiredRoles:["Admin"],children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("nav",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400","aria-label":"Breadcrumb",children:[(0,r.jsx)(i.default,{href:"/",className:"hover:text-primary-600 dark:hover:text-primary-400",children:"Inicio"}),(0,r.jsx)("svg",{className:"mx-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})}),(0,r.jsx)("span",{className:"text-gray-900 dark:text-white font-medium",children:"Empresas"})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestion de Empresas"}),(0,r.jsx)("button",{className:"btn-primary",onClick:()=>{k(),x(!0)},children:"Nueva Empresa"})]}),(0,r.jsx)("div",{className:"card overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nombre"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Visibilidad"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Color"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fecha Creacion"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:t?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"Cargando..."})}):0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No hay empresas registradas"})}):e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.id}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,r.jsx)(i.default,{href:"/admin/empresas/".concat(e.id),className:"text-primary-600 dark:text-primary-400 hover:underline font-medium",children:e.nombre})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:"propios"===e.configVisibilidadTickets?"Solo propios":"Toda la empresa"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("div",{className:"w-6 h-6 rounded border border-gray-300",style:{backgroundColor:e.colorPrimario||"#2563eb"},title:e.colorPrimario||"#2563eb"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.activa?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"),children:e.activa?"Activa":"Inactiva"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.fechaCreacion).toLocaleDateString("es-ES")}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:[(0,r.jsx)("button",{onClick:()=>b(e),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400",children:"Editar"}),(0,r.jsx)("button",{onClick:()=>v(e),className:e.activa?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900",children:e.activa?"Desactivar":"Activar"})]})]},e.id))})]})})})]}),o&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:m?"Editar Empresa":"Nueva Empresa"}),(0,r.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre"}),(0,r.jsx)("input",{type:"text",className:"input w-full",value:h.nombre,onChange:e=>u({...h,nombre:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Visibilidad de Tickets"}),(0,r.jsxs)("select",{className:"input w-full",value:h.configVisibilidadTickets,onChange:e=>u({...h,configVisibilidadTickets:e.target.value}),children:[(0,r.jsx)("option",{value:"propios",children:"Solo tickets propios"}),(0,r.jsx)("option",{value:"empresa",children:"Todos los tickets de la empresa"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Color Primario"}),(0,r.jsx)("input",{type:"color",className:"w-full h-10 rounded cursor-pointer",value:h.colorPrimario,onChange:e=>u({...h,colorPrimario:e.target.value})})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"activa",className:"h-4 w-4 text-blue-600 rounded",checked:h.activa,onChange:e=>u({...h,activa:e.target.checked})}),(0,r.jsx)("label",{htmlFor:"activa",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Empresa activa"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>{x(!1),k()},children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",className:"btn-primary",children:m?"Guardar":"Crear"})]})]})]})})]})}},11888:function(e,a,t){"use strict";t.d(a,{Zn:function(){return r.Z}}),t(42530),t(57018);var r=t(81076)}},function(e){e.O(0,[7648,7859,3464,6137,1076,2971,2117,1744],function(){return e(e.s=9957)}),_N_E=e.O()}]);