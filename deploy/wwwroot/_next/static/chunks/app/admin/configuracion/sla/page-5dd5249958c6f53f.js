(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1997],{37505:function(e,r,a){Promise.resolve().then(a.bind(a,6766))},6766:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return l}});var t=a(57437),s=a(2265),i=a(99376),d=a(11888),n=a(71837);function l(){let e=(0,i.useRouter)(),[r,a]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0),[o,u]=(0,s.useState)(!1),[x,m]=(0,s.useState)(""),[p,g]=(0,s.useState)("");(0,s.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await n.ZP.get("/configuracion/sla");a(e.data)}catch(e){m("Error al cargar la configuracion de SLA")}finally{c(!1)}},b=(e,r,t)=>{a(a=>a.map(a=>a.id===e?{...a,[r]:t}:a)),m(""),g("")},y=async e=>{e.preventDefault(),u(!0),m(""),g("");try{await n.ZP.put("/configuracion/sla",r),g("Configuracion de SLA guardada correctamente")}catch(e){var a,t;m((null===(t=e.response)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.message)||"Error al guardar la configuracion")}finally{u(!1)}},f=e=>{switch(e){case"Alta":return"text-red-600 dark:text-red-400 bg-red-50 dark:bg-red-900/20";case"Media":return"text-yellow-600 dark:text-yellow-400 bg-yellow-50 dark:bg-yellow-900/20";case"Baja":return"text-green-600 dark:text-green-400 bg-green-50 dark:bg-green-900/20";default:return"text-gray-600 dark:text-gray-400"}};return l?(0,t.jsx)(d.Zn,{requiredRoles:["Admin"],children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,t.jsx)(d.Zn,{requiredRoles:["Admin"],children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Configuracion de SLA"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Define los tiempos de respuesta y resolucion por prioridad"})]}),(0,t.jsx)("button",{onClick:()=>e.push("/admin/configuracion"),className:"btn-secondary",children:"Volver"})]}),x&&(0,t.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded",children:x}),p&&(0,t.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400 px-4 py-3 rounded",children:p}),(0,t.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,t.jsx)("div",{className:"card overflow-hidden",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,t.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Prioridad"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Tiempo de Respuesta (horas)"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Tiempo de Resolucion (horas)"})]})}),(0,t.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:r.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:"inline-flex px-3 py-1 rounded-full text-sm font-medium ".concat(f(e.prioridad)),children:e.prioridad})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("input",{type:"number",min:"1",value:e.tiempoRespuestaHoras,onChange:r=>b(e.id,"tiempoRespuestaHoras",parseInt(r.target.value)||1),className:"input w-24"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("input",{type:"number",min:"1",value:e.tiempoResolucionHoras,onChange:r=>b(e.id,"tiempoResolucionHoras",parseInt(r.target.value)||1),className:"input w-24"})})]},e.id))})]})}),(0,t.jsxs)("div",{className:"card p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Informacion sobre SLA"}),(0,t.jsxs)("ul",{className:"text-sm text-blue-700 dark:text-blue-400 space-y-1",children:[(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Tiempo de Respuesta:"})," Tiempo maximo para la primera respuesta al cliente"]}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Tiempo de Resolucion:"})," Tiempo maximo para resolver completamente el ticket"]}),(0,t.jsx)("li",{children:"• Los tiempos se calculan en horas habiles desde la creacion del ticket"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>e.push("/admin/configuracion"),className:"btn-secondary",children:"Cancelar"}),(0,t.jsx)("button",{type:"submit",disabled:o,className:"btn-primary",children:o?"Guardando...":"Guardar Cambios"})]})]})]})})}},11888:function(e,r,a){"use strict";a.d(r,{Zn:function(){return t.Z}}),a(42530),a(57018);var t=a(81076)}},function(e){e.O(0,[7648,7859,3464,6137,1076,2971,2117,1744],function(){return e(e.s=37505)}),_N_E=e.O()}]);