(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1203],{94554:function(e,a,r){Promise.resolve().then(r.bind(r,89147))},89147:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return o}});var s=r(57437),t=r(2265),i=r(99376),n=r(11888),d=r(71837);let l={SessionTimeoutMinutes:"Timeout de Sesion (minutos)",ColorPrimario:"Color Primario",ColorSecundario:"Color Secundario",NombreSistema:"Nombre del Sistema",LogoUrl:"URL del Logo"};function o(){let e=(0,i.useRouter)(),[a,r]=(0,t.useState)([]),[o,c]=(0,t.useState)(!0),[u,m]=(0,t.useState)(!1),[x,b]=(0,t.useState)(""),[g,p]=(0,t.useState)("");(0,t.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=await d.ZP.get("/configuracion/sistema");r(e.data)}catch(e){b("Error al cargar la configuracion del sistema")}finally{c(!1)}},v=(e,a)=>{r(r=>r.map(r=>r.id===e?{...r,valor:a}:r)),b(""),p("")},f=async e=>{e.preventDefault(),m(!0),b(""),p("");try{await d.ZP.put("/configuracion/sistema",a),p("Configuracion del sistema guardada correctamente")}catch(e){var r,s;b((null===(s=e.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message)||"Error al guardar la configuracion")}finally{m(!1)}},j=e=>{let a=e.clave.toLowerCase().includes("color"),r="SessionTimeoutMinutes"===e.clave;return a?(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("input",{type:"color",value:e.valor||"#000000",onChange:a=>v(e.id,a.target.value),className:"h-10 w-16 rounded cursor-pointer border border-gray-300 dark:border-gray-600"}),(0,s.jsx)("input",{type:"text",value:e.valor,onChange:a=>v(e.id,a.target.value),placeholder:"#000000",className:"input w-32"})]}):r?(0,s.jsx)("input",{type:"number",min:"5",max:"480",value:e.valor,onChange:a=>v(e.id,a.target.value),className:"input w-32"}):(0,s.jsx)("input",{type:"text",value:e.valor,onChange:a=>v(e.id,a.target.value),placeholder:"LogoUrl"===e.clave?"https://...":"",className:"input w-full max-w-md"})};return o?(0,s.jsx)(n.Zn,{requiredRoles:["Admin"],children:(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):(0,s.jsx)(n.Zn,{requiredRoles:["Admin"],children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Configuracion del Sistema"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Personaliza los ajustes generales del sistema"})]}),(0,s.jsx)("button",{onClick:()=>e.push("/admin/configuracion"),className:"btn-secondary",children:"Volver"})]}),x&&(0,s.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 text-red-700 dark:text-red-400 px-4 py-3 rounded",children:x}),g&&(0,s.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 text-green-700 dark:text-green-400 px-4 py-3 rounded",children:g}),(0,s.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,s.jsx)("div",{className:"card divide-y divide-gray-200 dark:divide-gray-700",children:a.map(e=>(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-900 dark:text-white",children:l[e.clave]||e.clave}),e.descripcion&&(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.descripcion}),(0,s.jsx)("div",{className:"mt-2",children:j(e)})]})},e.id))}),(0,s.jsxs)("div",{className:"card p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-amber-800 dark:text-amber-300 mb-2",children:"Nota Importante"}),(0,s.jsx)("p",{className:"text-sm text-amber-700 dark:text-amber-400",children:"Algunos cambios pueden requerir recargar la pagina para verse reflejados. Los cambios de colores afectaran toda la interfaz del sistema."})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>e.push("/admin/configuracion"),className:"btn-secondary",children:"Cancelar"}),(0,s.jsx)("button",{type:"submit",disabled:u,className:"btn-primary",children:u?"Guardando...":"Guardar Cambios"})]})]})]})})}},11888:function(e,a,r){"use strict";r.d(a,{Zn:function(){return s.Z}}),r(42530),r(57018);var s=r(81076)}},function(e){e.O(0,[7648,7859,3464,6137,1076,2971,2117,1744],function(){return e(e.s=94554)}),_N_E=e.O()}]);