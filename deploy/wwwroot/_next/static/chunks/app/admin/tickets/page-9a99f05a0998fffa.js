(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5314],{73248:function(e,t,a){Promise.resolve().then(a.bind(a,98293))},98293:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return s}});var r=a(57437),o=a(2265),i=a(11888),d=a(27648),n=a(71837);let l=[{id:1,titulo:"Error al cargar reportes en el sistema",estado:"EnProceso",prioridad:"Alta",categoria:"Sistema de Ventas",clienteNombre:"Cliente Demo",empleadoNombre:"Empleado Demo",fechaCreacion:new Date(Date.now()-1728e5).toISOString()},{id:2,titulo:"No puedo acceder al portal web",estado:"Abierto",prioridad:"Media",categoria:"Portal Web",clienteNombre:"Juan Perez",empleadoNombre:null,fechaCreacion:new Date(Date.now()-864e5).toISOString()},{id:3,titulo:"Solicitud de nueva funcionalidad",estado:"EnEspera",prioridad:"Baja",categoria:"Aplicacion Movil",clienteNombre:"Maria Garcia",empleadoNombre:"Admin Demo",fechaCreacion:new Date(Date.now()-432e6).toISOString()},{id:4,titulo:"Problema con facturacion electronica",estado:"Abierto",prioridad:"Alta",categoria:"Facturacion",clienteNombre:"Carlos Rodriguez",empleadoNombre:null,fechaCreacion:new Date(Date.now()-2592e5).toISOString()},{id:5,titulo:"Error en sincronizacion de inventario",estado:"EnProceso",prioridad:"Media",categoria:"Inventario",clienteNombre:"Ana Martinez",empleadoNombre:"Empleado Demo",fechaCreacion:new Date(Date.now()-3456e5).toISOString()},{id:6,titulo:"Solicitud de capacitacion",estado:"Resuelto",prioridad:"Baja",categoria:"Soporte",clienteNombre:"Luis Fernandez",empleadoNombre:"Admin Demo",fechaCreacion:new Date(Date.now()-864e6).toISOString()},{id:7,titulo:"Cambio de contrasena no funciona",estado:"Abierto",prioridad:"Alta",categoria:"Seguridad",clienteNombre:"Rosa Lopez",empleadoNombre:null,fechaCreacion:new Date(Date.now()-864e5).toISOString()},{id:8,titulo:"Reporte de ventas incorrecto",estado:"EnEspera",prioridad:"Media",categoria:"Reportes",clienteNombre:"Pedro Sanchez",empleadoNombre:"Empleado Demo",fechaCreacion:new Date(Date.now()-5184e5).toISOString()},{id:9,titulo:"Integracion con API externa",estado:"EnProceso",prioridad:"Alta",categoria:"Integraciones",clienteNombre:"Sofia Torres",empleadoNombre:"Admin Demo",fechaCreacion:new Date(Date.now()-6048e5).toISOString()},{id:10,titulo:"Actualizacion de datos de cliente",estado:"Cerrado",prioridad:"Baja",categoria:"Datos",clienteNombre:"Miguel Herrera",empleadoNombre:"Empleado Demo",fechaCreacion:new Date(Date.now()-1296e6).toISOString()},{id:11,titulo:"Error en modulo de pagos",estado:"Abierto",prioridad:"Alta",categoria:"Pagos",clienteNombre:"Laura Gomez",empleadoNombre:null,fechaCreacion:new Date(Date.now()-1728e5).toISOString()},{id:12,titulo:"Consulta sobre precios",estado:"Resuelto",prioridad:"Baja",categoria:"Ventas",clienteNombre:"Diego Ruiz",empleadoNombre:"Admin Demo",fechaCreacion:new Date(Date.now()-6912e5).toISOString()},{id:13,titulo:"Sistema caido urgente",estado:"Abierto",prioridad:"Alta",categoria:"Infraestructura",clienteNombre:"Fernando Diaz",empleadoNombre:null,fechaCreacion:new Date(Date.now()-864e5).toISOString()},{id:14,titulo:"Error critico en produccion",estado:"Abierto",prioridad:"Alta",categoria:"Produccion",clienteNombre:"Carmen Vega",empleadoNombre:null,fechaCreacion:new Date(Date.now()-864e5).toISOString()},{id:15,titulo:"Base de datos lenta",estado:"Abierto",prioridad:"Alta",categoria:"Base de Datos",clienteNombre:"Roberto Nunez",empleadoNombre:null,fechaCreacion:new Date(Date.now()-1728e5).toISOString()},{id:16,titulo:"Problema de memoria",estado:"Abierto",prioridad:"Alta",categoria:"Servidor",clienteNombre:"Isabel Castro",empleadoNombre:null,fechaCreacion:new Date(Date.now()-2592e5).toISOString()},{id:17,titulo:"Fallo en backup",estado:"Abierto",prioridad:"Alta",categoria:"Backup",clienteNombre:"Andres Moreno",empleadoNombre:null,fechaCreacion:new Date(Date.now()-3456e5).toISOString()},{id:18,titulo:"Problema de red",estado:"Abierto",prioridad:"Alta",categoria:"Red",clienteNombre:"Patricia Luna",empleadoNombre:null,fechaCreacion:new Date(Date.now()-432e6).toISOString()}];function s(){let[e,t]=(0,o.useState)([]),[a,s]=(0,o.useState)(!0),[c,x]=(0,o.useState)(""),[m,g]=(0,o.useState)(""),[p,u]=(0,o.useState)(""),[b,h]=(0,o.useState)(1);(0,o.useEffect)(()=>{let e=new AbortController,a=!0;return(async()=>{try{let r=new URLSearchParams;c&&r.append("estado",c),m&&r.append("prioridad",m),p&&r.append("busqueda",p);let o=await n.ZP.get("/tickets?".concat(r),{signal:e.signal});if(!a)return;let i=o.data;i.items?t(i.items):Array.isArray(i)?t(i):(console.log("Using demo tickets (unexpected response format)"),t(k()))}catch(e){if(e instanceof Error&&"AbortError"===e.name){console.log("Request aborted - user navigated away");return}if(!a)return;console.log("Using demo tickets (API not available)"),t(k())}finally{a&&s(!1)}})(),h(1),()=>{a=!1,e.abort()}},[c,m,p]);let y=Math.ceil(e.length/5),w=(b-1)*5,N=w+5,f=e.slice(w,N),k=()=>{let e=[...l];if(c&&(e=e.filter(e=>e.estado===c)),m&&(e=e.filter(e=>e.prioridad===m)),p){let t=p.toLowerCase();e=e.filter(e=>e.titulo.toLowerCase().includes(t))}return e},j=e=>({Abierto:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",EnProceso:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",EnEspera:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",Resuelto:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",Cerrado:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"})[e]||"bg-gray-100 text-gray-800",v=e=>({Alta:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",Media:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",Baja:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"})[e]||"bg-gray-100 text-gray-800",S=e=>({Abierto:"Abierto",EnProceso:"En Proceso",EnEspera:"En Espera",Resuelto:"Resuelto",Cerrado:"Cerrado"})[e]||e;return(0,r.jsx)(i.Zn,{requiredRoles:["Admin"],children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestion de Tickets"})}),(0,r.jsx)("div",{className:"card p-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Buscar"}),(0,r.jsx)("input",{type:"text",className:"input w-full",placeholder:"Buscar por titulo...",value:p,onChange:e=>u(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estado"}),(0,r.jsxs)("select",{className:"input w-full",value:c,onChange:e=>x(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Todos"}),(0,r.jsx)("option",{value:"Abierto",children:"Abierto"}),(0,r.jsx)("option",{value:"EnProceso",children:"En Proceso"}),(0,r.jsx)("option",{value:"EnEspera",children:"En Espera"}),(0,r.jsx)("option",{value:"Resuelto",children:"Resuelto"}),(0,r.jsx)("option",{value:"Cerrado",children:"Cerrado"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prioridad"}),(0,r.jsxs)("select",{className:"input w-full",value:m,onChange:e=>g(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Todas"}),(0,r.jsx)("option",{value:"Alta",children:"Alta"}),(0,r.jsx)("option",{value:"Media",children:"Media"}),(0,r.jsx)("option",{value:"Baja",children:"Baja"})]})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsx)("button",{className:"btn-secondary w-full",onClick:()=>{x(""),g(""),u("")},children:"Limpiar Filtros"})})]})}),(0,r.jsxs)("div",{className:"card overflow-hidden",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Titulo"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Prioridad"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Cliente"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Asignado a"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fecha"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:a?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"Cargando..."})}):0===f.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No hay tickets para mostrar"})}):f.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",e.id]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white max-w-xs truncate",title:e.titulo,children:e.titulo}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(j(e.estado)),children:S(e.estado)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(v(e.prioridad)),children:e.prioridad})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 max-w-[150px] truncate",children:e.clienteNombre}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.empleadoAsignadoNombre||e.empleadoNombre||"Sin asignar"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.fechaCreacion).toLocaleDateString("es-ES")}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,r.jsx)(d.default,{href:"/admin/tickets/".concat(e.id),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"Ver detalle"})})]},e.id))})]})}),y>1&&(0,r.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Mostrando ",w+1," - ",Math.min(N,e.length)," de ",e.length," tickets"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>h(Math.max(1,b-1)),disabled:1===b,className:"px-3 py-1 text-sm font-medium rounded-md border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Anterior"}),Array.from({length:y},(e,t)=>t+1).map(e=>(0,r.jsx)("button",{onClick:()=>h(e),className:"px-3 py-1 text-sm font-medium rounded-md transition-colors ".concat(b===e?"bg-primary-600 text-white":"border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"),children:e},e)),(0,r.jsx)("button",{onClick:()=>h(Math.min(y,b+1)),disabled:b===y,className:"px-3 py-1 text-sm font-medium rounded-md border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Siguiente"})]})]})]})]})})}},11888:function(e,t,a){"use strict";a.d(t,{Zn:function(){return r.Z}}),a(42530),a(57018);var r=a(81076)}},function(e){e.O(0,[7648,7859,3464,6137,1076,2971,2117,1744],function(){return e(e.s=73248)}),_N_E=e.O()}]);