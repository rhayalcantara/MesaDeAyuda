(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1078],{60056:function(e,t,a){Promise.resolve().then(a.bind(a,17826))},17826:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var r=a(57437),s=a(2265),c=a(11888);function i(){let[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)(!0),[n,l]=(0,s.useState)(!1),[d,o]=(0,s.useState)(null),[x,h]=(0,s.useState)({nombre:"",descripcion:"",activa:!0});(0,s.useEffect)(()=>{p()},[]);let p=async()=>{try{let e=await fetch("http://localhost:5000/api/categorias");if(e.ok){let a=await e.json();t(a)}}catch(e){console.error("Error fetching categorias:",e)}finally{i(!1)}},m=async e=>{e.preventDefault();try{let e=d?"http://localhost:5000/api/categorias/".concat(d.id):"http://localhost:5000/api/categorias";(await fetch(e,{method:d?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).ok&&(p(),l(!1),b())}catch(e){console.error("Error saving categoria:",e)}},g=e=>{o(e),h({nombre:e.nombre,descripcion:e.descripcion||"",activa:e.activa}),l(!0)},u=async e=>{try{(await fetch("http://localhost:5000/api/categorias/".concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,activa:!e.activa})})).ok&&p()}catch(e){console.error("Error toggling categoria:",e)}},y=async e=>{if(confirm("Esta seguro de eliminar esta categoria?"))try{(await fetch("http://localhost:5000/api/categorias/".concat(e),{method:"DELETE"})).ok&&p()}catch(e){console.error("Error deleting categoria:",e)}},b=()=>{o(null),h({nombre:"",descripcion:"",activa:!0})};return(0,r.jsxs)(c.Zn,{requiredRoles:["Admin"],children:[(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Gestion de Categorias"}),(0,r.jsx)("button",{className:"btn-primary",onClick:()=>{b(),l(!0)},children:"Nueva Categoria"})]}),(0,r.jsx)("div",{className:"card p-4 bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",children:(0,r.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Las categorias representan los sistemas o areas sobre los cuales los clientes pueden reportar problemas."})}),(0,r.jsx)("div",{className:"card overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nombre"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Descripcion"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fecha Creacion"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:a?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"Cargando..."})}):0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No hay categorias registradas"})}):e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.id}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white font-medium",children:e.nombre}),(0,r.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 dark:text-gray-400 max-w-xs truncate",title:e.descripcion||"",children:e.descripcion||"-"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.activa?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300"),children:e.activa?"Activa":"Inactiva"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.fechaCreacion).toLocaleDateString("es-ES")}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm space-x-2",children:[(0,r.jsx)("button",{onClick:()=>g(e),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400",children:"Editar"}),(0,r.jsx)("button",{onClick:()=>u(e),className:e.activa?"text-orange-600 hover:text-orange-900":"text-green-600 hover:text-green-900",children:e.activa?"Desactivar":"Activar"}),(0,r.jsx)("button",{onClick:()=>y(e.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},e.id))})]})})})]}),n&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 w-full max-w-md",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:d?"Editar Categoria":"Nueva Categoria"}),(0,r.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre"}),(0,r.jsx)("input",{type:"text",className:"input w-full",value:x.nombre,onChange:e=>h({...x,nombre:e.target.value}),required:!0,placeholder:"Ej: Sistema de Facturacion"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcion"}),(0,r.jsx)("textarea",{className:"input w-full",rows:3,value:x.descripcion,onChange:e=>h({...x,descripcion:e.target.value}),placeholder:"Descripcion opcional de la categoria"})]}),(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"checkbox",id:"activa",className:"h-4 w-4 text-blue-600 rounded",checked:x.activa,onChange:e=>h({...x,activa:e.target.checked})}),(0,r.jsx)("label",{htmlFor:"activa",className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Categoria activa"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,r.jsx)("button",{type:"button",className:"btn-secondary",onClick:()=>{l(!1),b()},children:"Cancelar"}),(0,r.jsx)("button",{type:"submit",className:"btn-primary",children:d?"Guardar":"Crear"})]})]})]})})]})}},11888:function(e,t,a){"use strict";a.d(t,{Zn:function(){return r.Z}}),a(42530),a(57018);var r=a(81076)}},function(e){e.O(0,[7648,7859,3464,6137,1076,2971,2117,1744],function(){return e(e.s=60056)}),_N_E=e.O()}]);