(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[953],{26935:function(e,a,r){Promise.resolve().then(r.bind(r,88554))},99376:function(e,a,r){"use strict";var t=r(35475);r.o(t,"useParams")&&r.d(a,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},88554:function(e,a,r){"use strict";r.d(a,{default:function(){return x}});var t=r(57437),i=r(2265),n=r(27648),o=r(99376);function s(e){return new Intl.DateTimeFormat("es-ES",{dateStyle:"medium",timeStyle:"short",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}).format(e)}function l(e){let a=new Date().getTime()-e.getTime(),r=Math.floor(a/6e4),t=Math.floor(a/36e5),i=Math.floor(a/864e5);return r<1?"hace un momento":r<60?"hace ".concat(r," minuto").concat(1!==r?"s":""):t<24?"hace ".concat(t," hora").concat(1!==t?"s":""):i<7?"hace ".concat(i," d\xeda").concat(1!==i?"s":""):s(e)}function d(e){let{prioridad:a}=e,r={Alta:{bg:"bg-red-100 dark:bg-red-900/50",text:"text-red-800 dark:text-red-200",border:"border-red-200 dark:border-red-800",icon:"⚠️"},Media:{bg:"bg-yellow-100 dark:bg-yellow-900/50",text:"text-yellow-800 dark:text-yellow-200",border:"border-yellow-200 dark:border-yellow-800",icon:"●"},Baja:{bg:"bg-green-100 dark:bg-green-900/50",text:"text-green-800 dark:text-green-200",border:"border-green-200 dark:border-green-800",icon:"○"}}[a];return(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium border ".concat(r.bg," ").concat(r.text," ").concat(r.border),children:[(0,t.jsx)("span",{"aria-hidden":"true",children:r.icon}),a]})}function c(e){let{estado:a}=e,r={Abierto:{bg:"bg-blue-100 dark:bg-blue-900/50",text:"text-blue-800 dark:text-blue-200",border:"border-blue-200 dark:border-blue-800",icon:"\uD83D\uDD35"},EnProceso:{bg:"bg-purple-100 dark:bg-purple-900/50",text:"text-purple-800 dark:text-purple-200",border:"border-purple-200 dark:border-purple-800",icon:"\uD83D\uDFE3"},EnEspera:{bg:"bg-orange-100 dark:bg-orange-900/50",text:"text-orange-800 dark:text-orange-200",border:"border-orange-200 dark:border-orange-800",icon:"\uD83D\uDFE0"},Resuelto:{bg:"bg-green-100 dark:bg-green-900/50",text:"text-green-800 dark:text-green-200",border:"border-green-200 dark:border-green-800",icon:"✅"},Cerrado:{bg:"bg-gray-100 dark:bg-gray-700",text:"text-gray-800 dark:text-gray-200",border:"border-gray-200 dark:border-gray-600",icon:"⬛"}}[a];return(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium border ".concat(r.bg," ").concat(r.text," ").concat(r.border),children:[(0,t.jsx)("span",{"aria-hidden":"true",children:r.icon}),{Abierto:"Abierto",EnProceso:"En Proceso",EnEspera:"En Espera",Resuelto:"Resuelto",Cerrado:"Cerrado"}[a]]})}function m(e){return e<1024?e+" B":e<1048576?(e/1024).toFixed(1)+" KB":(e/1048576).toFixed(1)+" MB"}function u(e){let a,r;e.tipoMime.startsWith("image/")?(a='<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300">\n      <rect width="400" height="300" fill="#f0f0f0"/>\n      <text x="200" y="140" text-anchor="middle" font-family="Arial" font-size="20" fill="#666">Demo Image</text>\n      <text x="200" y="170" text-anchor="middle" font-family="Arial" font-size="14" fill="#999">'.concat(e.nombreOriginal,'</text>\n      <rect x="50" y="200" width="100" height="60" fill="#e74c3c" rx="5"/>\n      <rect x="170" y="220" width="80" height="40" fill="#3498db" rx="5"/>\n      <circle cx="330" cy="230" r="30" fill="#2ecc71"/>\n    </svg>'),r="image/svg+xml"):"application/pdf"===e.tipoMime?(a="Demo PDF Content\n================\n\nFile: ".concat(e.nombreOriginal,"\nSize: ").concat(m(e.tamanio),"\nUploaded by: ").concat(e.subidoPor,"\n\nThis is a demo file generated by MDAyuda.\nIn a production environment, this would be the actual uploaded PDF file.\n\nSample Report Data:\n------------------\nDate: ").concat(new Date().toLocaleDateString("es-ES"),"\nStatus: Complete\nTotal Items: 156\nProcessing Time: 2.5 seconds\n\nNotes:\nThis file demonstrates the download functionality for ticket attachments.\n"),r="text/plain"):(a="Demo File Content\n=================\n\nFile: ".concat(e.nombreOriginal,"\nType: ").concat(e.tipoMime,"\nSize: ").concat(m(e.tamanio),"\nUploaded by: ").concat(e.subidoPor,"\nUpload date: ").concat(s(e.fechaSubida),"\n\nThis is a demo file generated by MDAyuda.\nIn a production environment, this would be the actual uploaded file.\n\nLog entries:\n------------\n[").concat(new Date().toISOString(),"] INFO: Application started\n[").concat(new Date().toISOString(),"] INFO: Processing request\n[").concat(new Date().toISOString(),"] DEBUG: Query executed in 45ms\n[").concat(new Date().toISOString(),"] INFO: Request completed successfully\n"),r=e.tipoMime||"text/plain");let t=new Blob([a],{type:r}),i=URL.createObjectURL(t),n=document.createElement("a");n.href=i,n.download=e.nombreOriginal,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i)}function x(){let e=(0,o.useParams)().id,[a,r]=(0,i.useState)(new Date),[x,h]=(0,i.useState)(""),[g,p]=(0,i.useState)("comentarios"),[b,f]=(0,i.useState)(null),[v,k]=(0,i.useState)(null),[j,y]=(0,i.useState)(""),[w,N]=(0,i.useState)([]),[C,D]=(0,i.useState)(""),L=(0,i.useRef)(null),[M,S]=(0,i.useState)(""),[P,A]=(0,i.useState)(null),[T,z]=(0,i.useState)(""),[E,O]=(0,i.useState)(!1),[B,R]=(0,i.useState)([]),I=(0,i.useRef)(null),F=["jpg","jpeg","png","gif","pdf","doc","docx","xls","xlsx","txt"],W=["image/jpeg","image/png","image/gif","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/plain"],U=e=>{let a=e.split(".");return a.length>1?a[a.length-1].toLowerCase():""},G=async()=>{if(!M.trim())return;O(!0),await new Promise(e=>setTimeout(e,1500));let e={id:Date.now(),usuario:"Demo User",rol:"Empleado",texto:M,fecha:new Date,archivo:P?{nombreOriginal:P.name,tamanio:P.size,tipoMime:P.type||"application/octet-stream"}:void 0};R(a=>[...a,e]),S(""),A(null),O(!1),I.current&&(I.current.value="")};(0,i.useEffect)(()=>{h(Intl.DateTimeFormat().resolvedOptions().timeZone);let e=setInterval(()=>{r(new Date)},1e3);return()=>clearInterval(e)},[]);let V=new Date,H={1:{id:1,titulo:"Error al generar reportes de ventas",descripcion:'Al intentar generar el reporte mensual de ventas, el sistema muestra un error "Timeout exceeded". Esto ocurre cuando selecciono m\xe1s de 30 d\xedas de datos. El problema comenz\xf3 despu\xe9s de la \xfaltima actualizaci\xf3n del sistema.\n\nPasos para reproducir:\n1. Ir a Reportes > Ventas\n2. Seleccionar rango de fechas mayor a 30 d\xedas\n3. Hacer clic en "Generar Reporte"\n4. El sistema muestra error de timeout',estado:"Abierto",prioridad:"Alta",categoria:"Sistema de Ventas",fechaCreacion:new Date(V.getTime()-1728e5),fechaActualizacion:new Date(V.getTime()-72e5),fechaPrimeraRespuesta:new Date(V.getTime()-864e5),cliente:"Juan Perez",empleadoAsignado:"Maria Garcia"},2:{id:2,titulo:"Actualizacion de datos de inventario lenta",descripcion:"La sincronizaci\xf3n del inventario est\xe1 tardando m\xe1s de 10 minutos cuando antes tardaba 2 minutos. El problema ocurre principalmente durante las horas pico (10am-12pm).\n\nSe nota especialmente cuando hay m\xe1s de 500 productos para sincronizar.",estado:"EnProceso",prioridad:"Media",categoria:"Sistema de Inventario",fechaCreacion:new Date(V.getTime()-2592e5),fechaActualizacion:new Date(V.getTime()-18e6),fechaPrimeraRespuesta:new Date(V.getTime()-1728e5),cliente:"Maria Garcia",empleadoAsignado:"Carlos Lopez"},3:{id:3,titulo:"Solicitud de nuevo modulo de facturacion",descripcion:"Necesitamos un nuevo m\xf3dulo de facturaci\xf3n electr\xf3nica que cumpla con los requisitos de la DGII. El m\xf3dulo debe permitir:\n\n1. Generar NCF autom\xe1ticamente\n2. Enviar facturas por correo\n3. Generar reportes mensuales de facturaci\xf3n",estado:"EnEspera",prioridad:"Baja",categoria:"Portal Web",fechaCreacion:new Date(V.getTime()-432e6),fechaActualizacion:new Date(V.getTime()-864e5),cliente:"Carlos Lopez"},4:{id:4,titulo:"Bug en la aplicacion movil al sincronizar",descripcion:"La aplicaci\xf3n m\xf3vil se cierra inesperadamente cuando intento sincronizar datos sin conexi\xf3n a internet. El error ocurre en Android 12 y 13.",estado:"Resuelto",prioridad:"Alta",categoria:"Aplicacion Movil",fechaCreacion:new Date(V.getTime()-3456e5),fechaActualizacion:new Date(V.getTime()-432e5),fechaPrimeraRespuesta:new Date(V.getTime()-2592e5),cliente:"Ana Martinez",empleadoAsignado:"Maria Garcia"},5:{id:5,titulo:"Consulta sobre configuracion del sistema",descripcion:"Necesito ayuda para configurar las notificaciones por correo. No estoy seguro de cu\xe1les opciones debo activar.",estado:"Cerrado",prioridad:"Baja",categoria:"Otro",fechaCreacion:new Date(V.getTime()-6048e5),fechaActualizacion:new Date(V.getTime()-1728e5),fechaPrimeraRespuesta:new Date(V.getTime()-5184e5),cliente:"Pedro Sanchez",empleadoAsignado:"Carlos Lopez"},6:{id:6,titulo:"Este es un titulo extremadamente largo que deberia truncarse o ajustarse correctamente sin causar desbordamiento horizontal en la tabla de tickets",descripcion:"Este ticket es para probar el manejo de texto largo en la interfaz.",estado:"Abierto",prioridad:"Media",categoria:"Sistema de Pruebas de Texto Largo",fechaCreacion:new Date(V.getTime()-864e5),fechaActualizacion:new Date(V.getTime()-36e5),cliente:"Usuario Con Nombre Muy Largo Para Probar Truncamiento"}},_=H[Number(e)||1]||H[1],X=[{id:1,usuario:"Maria Garcia",rol:"Empleado",texto:"He recibido tu ticket y estoy investigando el problema. Parece estar relacionado con el tama\xf1o del conjunto de datos.",fecha:new Date(V.getTime()-864e5)},{id:2,usuario:"Juan Perez",rol:"Cliente",texto:"Gracias por la respuesta r\xe1pida. \xbfHay alg\xfan workaround mientras tanto?",fecha:new Date(V.getTime()-72e6)},{id:3,usuario:"Maria Garcia",rol:"Empleado",texto:"S\xed, por ahora puedes generar reportes en rangos de 15 d\xedas y combinarlos. Estoy trabajando en una soluci\xf3n permanente.",fecha:new Date(V.getTime()-72e5)}],q=[{id:1,nombreOriginal:"captura_error.png",tamanio:245760,tipoMime:"image/png",fechaSubida:new Date(V.getTime()-1728e5),subidoPor:"Juan Perez",previewUrl:"https://placehold.co/800x600/e74c3c/ffffff?text=Error+Screenshot"},{id:2,nombreOriginal:"log_servidor.txt",tamanio:15360,tipoMime:"text/plain",fechaSubida:new Date(V.getTime()-864e5),subidoPor:"Maria Garcia"},{id:3,nombreOriginal:"reporte_ventas_mayo.pdf",tamanio:1048576,tipoMime:"application/pdf",fechaSubida:new Date(V.getTime()-72e5),subidoPor:"Juan Perez"},{id:4,nombreOriginal:"diagrama_flujo.jpg",tamanio:512e3,tipoMime:"image/jpeg",fechaSubida:new Date(V.getTime()-216e5),subidoPor:"Maria Garcia",previewUrl:"https://placehold.co/800x600/3498db/ffffff?text=Flow+Diagram"}];return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-8 px-4",children:[(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(n.default,{href:"/demo/tickets",className:"text-primary-600 dark:text-primary-400 hover:underline text-sm",children:"← Volver a lista de tickets"})}),(0,t.jsxs)("div",{className:"mb-6 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,t.jsx)("h2",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Informaci\xf3n de Zona Horaria"}),(0,t.jsxs)("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Tu zona horaria:"})," ",x||"Cargando..."]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Hora actual (local):"})," ",s(a)]}),(0,t.jsx)("li",{children:"Todas las fechas se muestran en tu zona horaria local"})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-1",children:[(0,t.jsxs)("span",{children:["Ticket #",_.id]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsx)("span",{children:_.categoria})]}),(0,t.jsx)("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:_.titulo})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c,{estado:_.estado}),(0,t.jsx)(d,{prioridad:_.prioridad})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Fecha de Creaci\xf3n"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s(_.fechaCreacion)}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",l(_.fechaCreacion),")"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Primera Respuesta"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:_.fechaPrimeraRespuesta?s(_.fechaPrimeraRespuesta):"-"}),_.fechaPrimeraRespuesta&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",l(_.fechaPrimeraRespuesta),")"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"\xdaltima Actualizaci\xf3n"}),(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:s(_.fechaActualizacion)}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",l(_.fechaActualizacion),")"]})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex flex-wrap gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Cliente:"})," ",(0,t.jsx)("span",{className:"text-gray-900 dark:text-white font-medium",children:_.cliente})]}),_.empleadoAsignado&&(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500 dark:text-gray-400",children:"Asignado a:"})," ",(0,t.jsx)("span",{className:"text-gray-900 dark:text-white font-medium",children:_.empleadoAsignado})]})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 mb-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Descripci\xf3n"}),(0,t.jsx)("div",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-line",children:_.descripcion})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,t.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("nav",{className:"flex -mb-px","aria-label":"Tabs",children:[(0,t.jsx)("button",{onClick:()=>p("comentarios"),className:"py-4 px-6 text-sm font-medium border-b-2 transition-colors ".concat("comentarios"===g?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),"aria-selected":"comentarios"===g,role:"tab",id:"tab-comentarios","aria-controls":"tabpanel-comentarios",children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-9.75 1.51c0 1.6 1.123 2.994 2.707 3.227 1.129.166 2.27.293 3.423.379.35.026.67.21.865.501L12 21l2.755-4.133a1.14 1.14 0 01.865-.501 48.172 48.172 0 003.423-.379c1.584-.233 2.707-1.626 2.707-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"})}),"Comentarios (",X.length,")"]})}),(0,t.jsx)("button",{onClick:()=>p("archivos"),className:"py-4 px-6 text-sm font-medium border-b-2 transition-colors ".concat("archivos"===g?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),"aria-selected":"archivos"===g,role:"tab",id:"tab-archivos","aria-controls":"tabpanel-archivos",children:(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),"Archivos (",q.length,")"]})})]})}),(0,t.jsxs)("div",{className:"p-6",children:["comentarios"===g&&(0,t.jsxs)("div",{role:"tabpanel",id:"tabpanel-comentarios","aria-labelledby":"tab-comentarios",children:[(0,t.jsx)("div",{className:"space-y-4",children:[...X,...B].map(e=>(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.usuario}),(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300",children:e.rol})]}),(0,t.jsx)("time",{dateTime:e.fecha.toISOString(),className:"text-sm text-gray-500 dark:text-gray-400",title:s(e.fecha),children:l(e.fecha)})]}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:e.texto}),e.archivo&&(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-2 p-2 bg-white dark:bg-gray-600 rounded border border-gray-200 dark:border-gray-500",children:[(0,t.jsx)("svg",{className:"h-5 w-5 text-gray-500 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.archivo.nombreOriginal}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:m(e.archivo.tamanio)})]}),(0,t.jsxs)("span",{className:"text-xs text-green-600 dark:text-green-400 flex items-center gap-1",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),"Adjunto"]})]})]},e.id))}),(0,t.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,t.jsx)("label",{htmlFor:"new-comment",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Agregar comentario"}),(0,t.jsx)("textarea",{id:"new-comment",rows:3,value:M,onChange:e=>S(e.target.value),disabled:E,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-primary-500 disabled:opacity-50",placeholder:"Escribe tu comentario..."}),(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("input",{type:"file",ref:I,onChange:e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!r)return;z("");let t=U(r.name);if(!F.includes(t)){z('El tipo de archivo ".'.concat(t,'" no esta permitido.')),I.current&&(I.current.value="");return}if(r.size>10485760){z("El archivo excede el limite de 10MB (".concat(m(r.size),").")),I.current&&(I.current.value="");return}A(r)},className:"hidden","aria-label":"Adjuntar archivo al comentario"}),P&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg mb-2",children:[(0,t.jsx)("svg",{className:"h-5 w-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 truncate",children:P.name}),(0,t.jsx)("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:m(P.size)})]}),(0,t.jsx)("button",{type:"button",onClick:()=>{A(null),I.current&&(I.current.value="")},className:"text-blue-500 hover:text-blue-700 dark:hover:text-blue-300","aria-label":"Quitar archivo adjunto",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),T&&(0,t.jsx)("div",{className:"p-2 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-lg mb-2",role:"alert",children:(0,t.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300",children:T})})]}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>{var e;z(""),null===(e=I.current)||void 0===e||e.click()},disabled:E,className:"flex items-center gap-1 text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 disabled:opacity-50",children:[(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),"Adjuntar archivo"]}),(0,t.jsx)("button",{type:"button",onClick:G,disabled:E||!M.trim(),className:"px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:E?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):"Enviar"})]})]})]}),"archivos"===g&&(0,t.jsxs)("div",{role:"tabpanel",id:"tabpanel-archivos","aria-labelledby":"tab-archivos",children:[(()=>{let e=[...q,...w];return 0===e.length?(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No hay archivos adjuntos."}):(0,t.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:e.tipoMime.startsWith("image/")&&e.previewUrl?(0,t.jsxs)("button",{onClick:()=>f(e),className:"relative group cursor-pointer",title:"Ver imagen","aria-label":"Ver vista previa de ".concat(e.nombreOriginal),children:[(0,t.jsx)("img",{src:e.previewUrl,alt:"Miniatura de ".concat(e.nombreOriginal),className:"h-16 w-16 object-cover rounded-lg border border-gray-200 dark:border-gray-600"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-black/40 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,t.jsx)("svg",{className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607zM10.5 7.5v6m3-3h-6"})})})]}):e.tipoMime.startsWith("image/")?(0,t.jsx)("div",{className:"h-16 w-16 bg-blue-100 dark:bg-blue-900/50 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"h-8 w-8 text-blue-500",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})})}):"application/pdf"===e.tipoMime?(0,t.jsx)("div",{className:"h-16 w-16 bg-red-100 dark:bg-red-900/50 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"h-8 w-8 text-red-500",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})})}):(0,t.jsx)("div",{className:"h-16 w-16 bg-gray-100 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:(0,t.jsx)("svg",{className:"h-8 w-8 text-gray-500 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})})})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:e.nombreOriginal}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[m(e.tamanio)," • Subido por ",e.subidoPor," • ",s(e.fechaSubida)]}),e.tipoMime.startsWith("image/")&&e.previewUrl&&(0,t.jsx)("button",{onClick:()=>f(e),className:"text-sm text-primary-600 dark:text-primary-400 hover:underline mt-1",children:"Ver imagen"})]}),(0,t.jsx)("button",{onClick:()=>u(e),className:"flex-shrink-0 p-2 text-primary-600 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors",title:"Descargar archivo","aria-label":"Descargar ".concat(e.nombreOriginal),children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})})})]},e.id))})})(),null!==v&&(0,t.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-700 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("span",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:["Subiendo: ",j]}),(0,t.jsxs)("span",{className:"text-sm font-bold text-blue-700 dark:text-blue-300",children:[Math.round(v),"%"]})]}),(0,t.jsx)("div",{className:"w-full bg-blue-200 dark:bg-blue-800 rounded-full h-3",children:(0,t.jsx)("div",{className:"bg-blue-600 dark:bg-blue-500 h-3 rounded-full transition-all duration-150",style:{width:"".concat(v,"%")},role:"progressbar","aria-valuenow":Math.round(v),"aria-valuemin":0,"aria-valuemax":100,"aria-label":"Progreso de subida: ".concat(Math.round(v),"%")})}),(0,t.jsx)("p",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400",children:v<100?"Subiendo archivo...":"\xa1Completado!"})]}),C&&(0,t.jsx)("div",{className:"mb-4 p-4 bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-lg",role:"alert","aria-live":"assertive",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("svg",{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"text-sm font-semibold text-red-800 dark:text-red-200",children:C.includes("tipo de archivo")?"Tipo de archivo no permitido":"Archivo demasiado grande"}),(0,t.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300 mt-1",children:C})]}),(0,t.jsx)("button",{onClick:()=>D(""),className:"text-red-500 hover:text-red-700 dark:hover:text-red-300","aria-label":"Cerrar mensaje de error",children:(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})}),(0,t.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,t.jsx)("input",{type:"file",ref:L,onChange:e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!r)return;D("");let t=U(r.name),i=F.includes(t);if(W.includes(r.type)||r.type,!i){D('El tipo de archivo ".'.concat(t,'" no esta permitido. Tipos permitidos: JPG, PNG, GIF, PDF, DOC, DOCX, XLS, XLSX, TXT.')),L.current&&(L.current.value="");return}if(r.size>10485760){D('El archivo "'.concat(r.name,'" excede el limite de 10MB. Tama\xf1o del archivo: ').concat(m(r.size),". Por favor, seleccione un archivo mas peque\xf1o.")),L.current&&(L.current.value="");return}y(r.name),k(0);let n=0,o=setInterval(()=>{if(k(Math.min(++n/20*100,100)),n>=20){clearInterval(o);let e={id:Date.now(),nombreOriginal:r.name,tamanio:r.size,tipoMime:r.type||"application/octet-stream",fechaSubida:new Date,subidoPor:"Demo User",previewUrl:r.type.startsWith("image/")?URL.createObjectURL(r):void 0};N(a=>[...a,e]),setTimeout(()=>{k(null),y("")},500)}},150);L.current&&(L.current.value="")},className:"hidden","aria-label":"Seleccionar archivo para subir"}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>{var e;D(""),null===(e=L.current)||void 0===e||e.click()},disabled:null!==v,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-medium rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed w-fit",children:[(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"})}),null!==v?"Subiendo...":"Subir archivo"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tama\xf1o maximo: 10MB. Tipos permitidos: JPG, PNG, GIF, PDF, DOC, DOCX, XLS, XLSX, TXT"})]})]})]})]})]})]}),b&&b.previewUrl&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4",onClick:()=>f(null),role:"dialog","aria-modal":"true","aria-label":"Vista previa de ".concat(b.nombreOriginal),children:(0,t.jsxs)("div",{className:"relative max-w-4xl max-h-full",children:[(0,t.jsx)("button",{onClick:()=>f(null),className:"absolute -top-12 right-0 text-white hover:text-gray-300 transition-colors","aria-label":"Cerrar vista previa",children:(0,t.jsx)("svg",{className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),(0,t.jsx)("img",{src:b.previewUrl,alt:b.nombreOriginal,className:"max-w-full max-h-[80vh] object-contain rounded-lg",onClick:e=>e.stopPropagation()}),(0,t.jsxs)("div",{className:"mt-4 text-center text-white",children:[(0,t.jsx)("p",{className:"font-medium",children:b.nombreOriginal}),(0,t.jsxs)("p",{className:"text-sm text-gray-300",children:[m(b.tamanio)," • Subido por ",b.subidoPor]}),(0,t.jsxs)("button",{onClick:e=>{e.stopPropagation(),u(b)},className:"mt-3 inline-flex items-center gap-2 px-4 py-2 bg-white/20 hover:bg-white/30 rounded-lg transition-colors",children:[(0,t.jsx)("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),"Descargar"]})]})]})})]})}}},function(e){e.O(0,[7648,2971,2117,1744],function(){return e(e.s=26935)}),_N_E=e.O()}]);