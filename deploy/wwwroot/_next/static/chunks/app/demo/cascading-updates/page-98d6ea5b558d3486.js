(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5806],{6481:function(e,a,t){Promise.resolve().then(t.bind(t,28342))},28342:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return n}});var r=t(57437),s=t(2265),d=t(27648);let l="mdayuda_demo_empresas",i="mdayuda_demo_clientes";function n(){let[e,a]=(0,s.useState)([]),[t,n]=(0,s.useState)([]),[c,o]=(0,s.useState)([]),[m,x]=(0,s.useState)("idle"),[g,h]=(0,s.useState)(null),p=()=>{try{let e=localStorage.getItem(l),t=localStorage.getItem(i);e&&a(JSON.parse(e)),t&&n(JSON.parse(t))}catch(e){console.error("Error loading data")}},u=e=>{try{localStorage.setItem(l,JSON.stringify(e)),a(e)}catch(e){console.error("Error saving empresas")}},b=e=>{try{localStorage.setItem(i,JSON.stringify(e)),n(e)}catch(e){console.error("Error saving clientes")}};(0,s.useEffect)(()=>{p()},[]);let y=a=>{let t=e.find(e=>e.id===a);return t?t.nombre:"Empresa no encontrada"},j=e=>new Intl.DateTimeFormat("es-ES",{dateStyle:"medium",timeStyle:"short"}).format(new Date(e)),N=()=>{localStorage.removeItem(l),localStorage.removeItem(i),a([]),n([]),o([]),x("idle"),h(null)},k=async()=>{o([]),x("running"),h(null),N(),await new Promise(e=>setTimeout(e,100));let e=[],t=Date.now(),r="PARENT_EMPRESA_".concat(t),s="RENAMED_EMPRESA_".concat(t);e.push({step:"Paso 1: Login como Admin",passed:!0,message:"Usuario autenticado como Administrador"}),o([...e]),await new Promise(e=>setTimeout(e,500));let d={id:t,nombre:r,fechaCreacion:new Date().toISOString()};u([d]),e.push({step:"Paso 2: Crear empresa '".concat(r,"'"),passed:!0,message:"Empresa #".concat(d.id," creada exitosamente")}),o([...e]),await new Promise(e=>setTimeout(e,500));let c={id:t+1,nombre:"Cliente Test Cascading",email:"cliente_".concat(t,"@test.com"),empresaId:d.id,fechaCreacion:new Date().toISOString()};b([c]),e.push({step:"Paso 3: Crear cliente asociado a '".concat(r,"'"),passed:!0,message:"Cliente #".concat(c.id," creado y asociado a Empresa #").concat(d.id)}),o([...e]),await new Promise(e=>setTimeout(e,500)),u([{...d,nombre:s}]),e.push({step:"Paso 4: Editar nombre de empresa a '".concat(s,"'"),passed:!0,message:"Empresa renombrada de '".concat(r,"' a '").concat(s,"'")}),o([...e]),await new Promise(e=>setTimeout(e,500));let m=JSON.parse(localStorage.getItem(l)||"[]"),g=JSON.parse(localStorage.getItem(i)||"[]");a(m),n(g);let p=g.find(e=>e.id===c.id);h(p),e.push({step:"Paso 5: Ver detalle del cliente",passed:void 0!==p,message:p?"Mostrando detalle de Cliente #".concat(p.id,": ").concat(p.nombre):"Error: Cliente no encontrado"}),o([...e]),await new Promise(e=>setTimeout(e,500));let y=m.find(e=>e.id===(null==p?void 0:p.empresaId)),j=(null==y?void 0:y.nombre)===s;e.push({step:"Paso 6: Verificar empresa muestra '".concat(s,"'"),passed:j,message:j?"✅ El cliente muestra correctamente la empresa renombrada: '".concat(null==y?void 0:y.nombre,"'"):"❌ Error: La empresa muestra '".concat(null==y?void 0:y.nombre,"' en lugar de '").concat(s,"'")}),o([...e]),x("complete")},f=c.length>0&&c.every(e=>e.passed);return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(d.default,{href:"/demo",className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:"MDAyuda"}),(0,r.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Demo: Cascading Updates"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Usuario: ",(0,r.jsx)("strong",{children:"Admin Demo"})]})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Feature #33: Related records update when parent changes"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Esta pagina demuestra que cuando se modifica un registro padre (Empresa), los registros hijos (Clientes) reflejan automaticamente los cambios a traves de las relaciones de base de datos."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Empresas (",e.length,")"]}),(0,r.jsx)("button",{onClick:N,className:"px-3 py-1 text-sm bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded hover:bg-red-200 dark:hover:bg-red-900/50",children:"Limpiar Datos"})]})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nombre"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fecha Creacion"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:3,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No hay empresas. Ejecuta el test para crear datos."})}):e.map(e=>(0,r.jsxs)("tr",{className:e.nombre.includes("RENAMED")?"bg-green-50 dark:bg-green-900/20":"",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",e.id]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:[e.nombre,e.nombre.includes("RENAMED")&&(0,r.jsx)("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:"Renombrada"})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:j(e.fechaCreacion)})]},e.id))})]})})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Clientes (",t.length,")"]})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Nombre"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Empresa (FK)"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:0===t.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:3,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No hay clientes. Ejecuta el test para crear datos."})}):t.map(e=>(0,r.jsxs)("tr",{className:(null==g?void 0:g.id)===e.id?"bg-blue-50 dark:bg-blue-900/20":"",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",e.id]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.nombre}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,r.jsx)("span",{className:"px-2 py-1 rounded ".concat(y(e.empresaId).includes("RENAMED")?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 font-medium":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"),children:y(e.empresaId)})})]},e.id))})]})})]}),g&&(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg shadow p-6 border border-blue-200 dark:border-blue-800",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-blue-800 dark:text-blue-300 mb-4",children:"Detalle del Cliente Seleccionado"}),(0,r.jsxs)("dl",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm text-blue-600 dark:text-blue-400",children:"ID"}),(0,r.jsxs)("dd",{className:"font-medium text-blue-900 dark:text-blue-200",children:["#",g.id]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Nombre"}),(0,r.jsx)("dd",{className:"font-medium text-blue-900 dark:text-blue-200",children:g.nombre})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Email"}),(0,r.jsx)("dd",{className:"font-medium text-blue-900 dark:text-blue-200",children:g.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("dt",{className:"text-sm text-blue-600 dark:text-blue-400",children:["Empresa (via FK #",g.empresaId,")"]}),(0,r.jsx)("dd",{className:"font-medium text-green-700 dark:text-green-300 text-lg",children:y(g.empresaId)})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Test Automatizado"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Ejecuta todos los pasos del test de la Feature #33 automaticamente."}),(0,r.jsx)("button",{onClick:k,disabled:"running"===m,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50",children:"running"===m?"⏳ Ejecutando...":"▶️ Ejecutar Test Completo"})]}),c.length>0&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Resultados del Test"}),(0,r.jsx)("div",{className:"space-y-3",children:c.map((e,a)=>(0,r.jsxs)("div",{className:"p-3 rounded-lg ".concat(e.passed?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{children:e.passed?"✅":"❌"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.step})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 ml-6",children:e.message})]},a))}),"complete"===m&&(0,r.jsx)("div",{className:"mt-4 p-4 rounded-lg ".concat(f?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"),children:(0,r.jsx)("p",{className:"font-bold text-center ".concat(f?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"),children:f?"\uD83C\uDF89 \xa1Todos los tests pasaron!":"⚠️ Algunos tests fallaron"})})]}),(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Feature #33: Cascading Updates"}),(0,r.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-2",children:"Verifica que los cambios en registros padre se reflejan en hijos:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside text-sm text-blue-600 dark:text-blue-400 space-y-1",children:[(0,r.jsx)("li",{children:"Login como Admin"}),(0,r.jsx)("li",{children:"Crear empresa 'PARENT_EMPRESA'"}),(0,r.jsx)("li",{children:"Crear cliente asociado a la empresa"}),(0,r.jsx)("li",{children:"Renombrar empresa a 'RENAMED_EMPRESA'"}),(0,r.jsx)("li",{children:"Ver detalle del cliente"}),(0,r.jsx)("li",{children:"Verificar empresa muestra nuevo nombre"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Implementacion"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[(0,r.jsx)("li",{children:"• Cliente guarda empresaId (FK)"}),(0,r.jsx)("li",{children:"• Al mostrar cliente, se hace JOIN con Empresa"}),(0,r.jsx)("li",{children:"• Cambios en Empresa se reflejan automaticamente"}),(0,r.jsx)("li",{children:"• No hay duplicacion de datos"})]})]})]})]})]})]})}}},function(e){e.O(0,[7648,2971,2117,1744],function(){return e(e.s=6481)}),_N_E=e.O()}]);