(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9481],{2345:function(e,a,r){Promise.resolve().then(r.bind(r,63063))},99376:function(e,a,r){"use strict";var t=r(35475);r.o(t,"useParams")&&r.d(a,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},63063:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return c}});var t=r(57437),s=r(2265),i=r(27648),l=r(99376);let d={id:1,titulo:"Error al cargar reportes en el sistema",descripcion:"Al intentar generar el reporte mensual de ventas, el sistema muestra un error de timeout. El problema ocurre cuando se seleccionan fechas mayores a 30 dias. He intentado con diferentes navegadores pero el error persiste.",estado:"EnProceso",prioridad:"Alta",categoriaNombre:"Sistema de Ventas",clienteNombre:"Cliente Demo",clienteEmail:"cliente@demo.com",empleadoAsignadoNombre:"Empleado Demo",fechaCreacion:new Date(Date.now()-1728e5).toISOString(),fechaActualizacion:new Date(Date.now()-36e5).toISOString()},n=[{id:1,texto:"Gracias por reportar el problema. Vamos a revisar los logs del servidor.",usuario:{id:2,nombre:"Empleado Demo",rol:"Empleado"},fechaCreacion:new Date(Date.now()-864e5).toISOString()},{id:2,texto:"Gracias por la respuesta rapida. Quedo atento.",usuario:{id:3,nombre:"Cliente Demo",rol:"Cliente"},fechaCreacion:new Date(Date.now()-432e5).toISOString()}];function c(){var e;(0,l.useRouter)();let[a,r]=(0,s.useState)(!1),[c,o]=(0,s.useState)(!1),[x,m]=(0,s.useState)(!1),[g,h]=(0,s.useState)("comentarios"),u=e=>new Intl.DateTimeFormat("es-ES",{dateStyle:"medium",timeStyle:"short"}).format(new Date(e)),b=async()=>{if(c){console.log("Delete already in progress, ignoring duplicate click");return}o(!0),await new Promise(e=>setTimeout(e,1e3)),o(!1),r(!1),m(!0)};return x?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-8",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 flex items-center justify-center rounded-full bg-green-100 dark:bg-green-900/30",children:(0,t.jsx)("svg",{className:"h-8 w-8 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Ticket Eliminado"}),(0,t.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:["El ticket #",d.id," ha sido eliminado exitosamente."]}),(0,t.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>m(!1),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Volver a probar"}),(0,t.jsx)(i.default,{href:"/demo/admin-tickets",className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Ir a lista de tickets"})]})]}),(0,t.jsxs)("div",{className:"mt-6 bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Feature #39: Ticket Delete operation with confirmation ✅"}),(0,t.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-400",children:"Este test verifica que el flujo de eliminacion de tickets funciona correctamente:"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside text-sm text-blue-700 dark:text-blue-400 mt-2 space-y-1",children:[(0,t.jsx)("li",{children:'✅ El boton "Eliminar" existe en el detalle del ticket'}),(0,t.jsx)("li",{children:"✅ Al hacer clic aparece un dialogo de confirmacion"}),(0,t.jsx)("li",{children:"✅ El dialogo muestra advertencia clara"}),(0,t.jsx)("li",{children:'✅ El boton "Cancelar" cierra el dialogo sin eliminar'}),(0,t.jsx)("li",{children:'✅ El boton "Eliminar" muestra estado de carga'}),(0,t.jsx)("li",{children:"✅ Despues de confirmar, el ticket se elimina"}),(0,t.jsx)("li",{children:"✅ Se muestra mensaje de exito"})]})]}),(0,t.jsxs)("div",{className:"mt-4 bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Feature #83: Rapid delete clicks result in single deletion ✅"}),(0,t.jsx)("p",{className:"text-sm text-green-700 dark:text-green-400",children:"Proteccion contra multiples clics rapidos implementada:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside text-sm text-green-700 dark:text-green-400 mt-2 space-y-1",children:[(0,t.jsx)("li",{children:"✅ El boton se deshabilita durante el procesamiento"}),(0,t.jsx)("li",{children:"✅ Clics duplicados son ignorados en el handler"}),(0,t.jsx)("li",{children:"✅ Solo una eliminacion se ejecuta sin importar cuantas veces se haga clic"}),(0,t.jsx)("li",{children:"✅ No hay errores ni comportamiento inesperado"})]})]})]})}):(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:"MDAyuda"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Admin Demo"})]}),(0,t.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Usuario: Admin Demo"})]})})}),(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-2",children:[(0,t.jsx)(i.default,{href:"/demo/admin-tickets",className:"hover:text-primary-600",children:"Tickets"}),(0,t.jsx)("span",{children:"/"}),(0,t.jsxs)("span",{children:["#",d.id]})]}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:d.titulo})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{className:"px-4 py-2 flex items-center gap-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),"Editar"]}),(0,t.jsxs)("button",{onClick:()=>r(!0),className:"px-4 py-2 flex items-center gap-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[(0,t.jsx)("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),"Eliminar"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Descripcion"}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:d.descripcion})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,t.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("nav",{className:"flex -mb-px","aria-label":"Tabs",children:[(0,t.jsxs)("button",{onClick:()=>h("comentarios"),className:"py-4 px-6 text-sm font-medium border-b-2 transition-colors ".concat("comentarios"===g?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:["Comentarios (",n.length,")"]}),(0,t.jsx)("button",{onClick:()=>h("archivos"),className:"py-4 px-6 text-sm font-medium border-b-2 transition-colors ".concat("archivos"===g?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:"Archivos (0)"})]})}),(0,t.jsxs)("div",{className:"p-6",children:["comentarios"===g&&(0,t.jsx)("div",{className:"space-y-4",children:n.map(e=>(0,t.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.usuario.nombre}),(0,t.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full bg-gray-200 dark:bg-gray-600 text-gray-600 dark:text-gray-300",children:e.usuario.rol})]}),(0,t.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:u(e.fechaCreacion)})]}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:e.texto})]},e.id))}),"archivos"===g&&(0,t.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:"No hay archivos adjuntos."})]})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Informacion"}),(0,t.jsxs)("dl",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Estado"}),(0,t.jsx)("dd",{className:"mt-1",children:(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({Abierto:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",EnProceso:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",EnEspera:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",Resuelto:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",Cerrado:"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}[d.estado]||"bg-gray-100 text-gray-800"),children:{Abierto:"Abierto",EnProceso:"En Proceso",EnEspera:"En Espera",Resuelto:"Resuelto",Cerrado:"Cerrado"}[e=d.estado]||e})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prioridad"}),(0,t.jsx)("dd",{className:"mt-1",children:(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({Alta:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",Media:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",Baja:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"}[d.prioridad]||"bg-gray-100 text-gray-800"),children:d.prioridad})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Categoria"}),(0,t.jsx)("dd",{className:"mt-1 text-gray-900 dark:text-white",children:d.categoriaNombre})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Cliente"}),(0,t.jsxs)("dd",{className:"mt-1",children:[(0,t.jsx)("div",{className:"text-gray-900 dark:text-white",children:d.clienteNombre}),(0,t.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:d.clienteEmail})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Asignado a"}),(0,t.jsx)("dd",{className:"mt-1 text-gray-900 dark:text-white",children:d.empleadoAsignadoNombre})]})]})]}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Fechas"}),(0,t.jsxs)("dl",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Creado"}),(0,t.jsx)("dd",{className:"mt-1 text-gray-900 dark:text-white",children:u(d.fechaCreacion)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("dt",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Actualizado"}),(0,t.jsx)("dd",{className:"mt-1 text-gray-900 dark:text-white",children:u(d.fechaActualizacion)})]})]})]}),(0,t.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Features #39 y #83: Delete con Proteccion"}),(0,t.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-2",children:'Haz clic en el boton rojo "Eliminar" para probar el flujo de eliminacion con confirmacion y proteccion contra clics multiples.'}),(0,t.jsxs)("ul",{className:"text-xs text-blue-600 dark:text-blue-400 space-y-1",children:[(0,t.jsx)("li",{children:"• Dialogo de confirmacion"}),(0,t.jsx)("li",{children:"• Advertencia clara"}),(0,t.jsx)("li",{children:"• Botones Cancelar/Eliminar"}),(0,t.jsx)("li",{children:"• Estado de carga al eliminar"}),(0,t.jsxs)("li",{children:["• ",(0,t.jsx)("strong",{children:"Feature #83:"})," Clics rapidos solo ejecutan una vez"]})]})]})]})]})]})}),a&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,t.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,t.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75 dark:bg-gray-900 dark:bg-opacity-75",onClick:()=>!c&&r(!1)}),(0,t.jsxs)("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white dark:bg-gray-800 shadow-xl rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30",children:(0,t.jsx)("svg",{className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Eliminar ticket"}),(0,t.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"\xbfEsta seguro de que desea eliminar este ticket? Esta accion no se puede deshacer."})]})]}),(0,t.jsxs)("div",{className:"mt-6 flex justify-end gap-3",children:[(0,t.jsx)("button",{type:"button",className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors disabled:opacity-50",onClick:()=>r(!1),disabled:c,children:"Cancelar"}),(0,t.jsxs)("button",{type:"button",className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",onClick:b,disabled:c,children:[c&&(0,t.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c?"Eliminando...":"Eliminar"]})]})]})]})})]})}}},function(e){e.O(0,[7648,2971,2117,1744],function(){return e(e.s=2345)}),_N_E=e.O()}]);