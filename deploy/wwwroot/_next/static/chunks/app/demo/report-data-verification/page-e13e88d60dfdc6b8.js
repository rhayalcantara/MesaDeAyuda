(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6183],{37465:function(e,t,a){Promise.resolve().then(a.bind(a,51631))},51631:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var r=a(57437),s=a(2265),d=a(27648);let l="mdayuda_demo_report_tickets";function i(){let[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)(null),[o,c]=(0,s.useState)([]),[n,x]=(0,s.useState)("idle"),[g,m]=(0,s.useState)(0),h=()=>{try{let e=localStorage.getItem(l);if(e){let a=JSON.parse(e);return t(a),a}}catch(e){console.error("Error loading tickets")}return t([]),[]},p=e=>{try{localStorage.setItem(l,JSON.stringify(e)),t(e)}catch(e){console.error("Error saving tickets")}},u=e=>{let t={total:e.length,porPrioridad:{Alta:0,Media:0,Baja:0},porEstado:{Abierto:0,EnProceso:0,Resuelto:0,Cerrado:0}};return e.forEach(e=>{t.porPrioridad[e.prioridad]++,t.porEstado[e.estado]++}),t};(0,s.useEffect)(()=>{i(u(h()))},[]);let b=async()=>{c([]),x("running");let e=h(),t=u(e),a=[];a.push({step:"Paso 1: Login como Admin",passed:!0,message:"Usuario autenticado como Administrador"}),c([...a]),await new Promise(e=>setTimeout(e,500));let r=t.porPrioridad.Alta;m(r),i(t),a.push({step:"Paso 2: Anotar numeros actuales del reporte",passed:!0,message:"Conteo actual - Total: ".concat(t.total,", Alta: ").concat(r,", Media: ").concat(t.porPrioridad.Media,", Baja: ").concat(t.porPrioridad.Baja)}),c([...a]),await new Promise(e=>setTimeout(e,500));let s=Date.now(),d=[];for(let e=1;e<=5;e++)d.push({id:s+e,titulo:"Ticket Alta Test ".concat(e," - ").concat(new Date().toLocaleTimeString()),prioridad:"Alta",estado:"Abierto",fechaCreacion:new Date().toISOString()});p([...e,...d]),a.push({step:"Paso 3: Crear 5 tickets con prioridad Alta",passed:!0,message:"5 tickets creados: IDs ".concat(d.map(e=>"#"+e.id).join(", "))}),c([...a]),await new Promise(e=>setTimeout(e,500));let l=u(h());i(l),a.push({step:"Paso 4: Ir a reportes",passed:!0,message:"Reporte actualizado - Total: ".concat(l.total,", Alta: ").concat(l.porPrioridad.Alta)}),c([...a]),await new Promise(e=>setTimeout(e,500));let o=r+5,n=l.porPrioridad.Alta,g=n===o;a.push({step:"Paso 5: Verificar que el conteo de Alta aumento en 5",passed:g,message:g?"✅ Conteo correcto: ".concat(r," + 5 = ").concat(n):"❌ Error: Esperado ".concat(o,", Actual ").concat(n)}),c([...a]),x("complete")},y=o.length>0&&o.every(e=>e.passed),j=e=>({Alta:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300",Media:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",Baja:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"})[e]||"bg-gray-100 text-gray-700";return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(d.default,{href:"/demo",className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:"MDAyuda"}),(0,r.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Demo: Report Data Verification"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Usuario: ",(0,r.jsx)("strong",{children:"Admin Demo"})]})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Feature #34: Report data matches actual created records"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Esta pagina demuestra que los reportes muestran datos agregados reales basados en los tickets existentes en la base de datos."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:(null==a?void 0:a.total)||0}),(0,r.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Tickets"})]}),(0,r.jsxs)("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg shadow p-6 border border-red-200 dark:border-red-800",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-red-700 dark:text-red-300",children:(null==a?void 0:a.porPrioridad.Alta)||0}),(0,r.jsx)("div",{className:"text-sm text-red-600 dark:text-red-400",children:"Prioridad Alta"}),"idle"!==n&&g>0&&(0,r.jsxs)("div",{className:"text-xs text-red-500 dark:text-red-400 mt-1",children:["(Inicial: ",g,")"]})]}),(0,r.jsxs)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg shadow p-6 border border-yellow-200 dark:border-yellow-800",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-yellow-700 dark:text-yellow-300",children:(null==a?void 0:a.porPrioridad.Media)||0}),(0,r.jsx)("div",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Prioridad Media"})]}),(0,r.jsxs)("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg shadow p-6 border border-green-200 dark:border-green-800",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-green-700 dark:text-green-300",children:(null==a?void 0:a.porPrioridad.Baja)||0}),(0,r.jsx)("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Prioridad Baja"})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Por Estado"}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:(null==a?void 0:a.porEstado.Abierto)||0}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Abierto"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:(null==a?void 0:a.porEstado.EnProceso)||0}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"En Proceso"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:(null==a?void 0:a.porEstado.Resuelto)||0}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Resuelto"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-gray-600 dark:text-gray-400",children:(null==a?void 0:a.porEstado.Cerrado)||0}),(0,r.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Cerrado"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Tickets (",e.length,")"]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:()=>{i(u(h()))},className:"px-3 py-1 text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded hover:bg-blue-200 dark:hover:bg-blue-900/50",children:"Actualizar Reporte"}),(0,r.jsx)("button",{onClick:()=>{localStorage.removeItem(l),t([]),i(u([])),c([]),x("idle"),m(0)},className:"px-3 py-1 text-sm bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded hover:bg-red-200 dark:hover:bg-red-900/50",children:"Limpiar Datos"})]})]})}),(0,r.jsx)("div",{className:"overflow-x-auto max-h-64 overflow-y-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Titulo"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Prioridad"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Estado"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No hay tickets. Ejecuta el test para crear datos."})}):e.slice(-10).reverse().map(e=>(0,r.jsxs)("tr",{className:"Alta"===e.prioridad?"bg-red-50 dark:bg-red-900/10":"",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",e.id]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.titulo}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(j(e.prioridad)),children:e.prioridad})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.estado})]},e.id))})]})}),e.length>10&&(0,r.jsxs)("div",{className:"px-6 py-2 bg-gray-50 dark:bg-gray-700 text-sm text-gray-500 dark:text-gray-400 text-center",children:["Mostrando ultimos 10 de ",e.length," tickets"]})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Test Automatizado"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Ejecuta todos los pasos del test de la Feature #34 automaticamente."}),(0,r.jsx)("button",{onClick:b,disabled:"running"===n,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50",children:"running"===n?"⏳ Ejecutando...":"▶️ Ejecutar Test Completo"})]}),o.length>0&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Resultados del Test"}),(0,r.jsx)("div",{className:"space-y-3",children:o.map((e,t)=>(0,r.jsxs)("div",{className:"p-3 rounded-lg ".concat(e.passed?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{children:e.passed?"✅":"❌"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.step})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 ml-6",children:e.message})]},t))}),"complete"===n&&(0,r.jsx)("div",{className:"mt-4 p-4 rounded-lg ".concat(y?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"),children:(0,r.jsx)("p",{className:"font-bold text-center ".concat(y?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"),children:y?"\uD83C\uDF89 \xa1Todos los tests pasaron!":"⚠️ Algunos tests fallaron"})})]}),(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Feature #34: Report Data Verification"}),(0,r.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-2",children:"Verifica que los reportes reflejan datos reales:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside text-sm text-blue-600 dark:text-blue-400 space-y-1",children:[(0,r.jsx)("li",{children:"Login como Admin"}),(0,r.jsx)("li",{children:"Anotar numeros actuales del reporte"}),(0,r.jsx)("li",{children:"Crear 5 tickets con prioridad Alta"}),(0,r.jsx)("li",{children:"Ir a reportes"}),(0,r.jsx)("li",{children:"Verificar que Alta aumento en 5"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Implementacion"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[(0,r.jsx)("li",{children:"• Reportes calculados en tiempo real"}),(0,r.jsx)("li",{children:"• Agregaciones basadas en datos reales"}),(0,r.jsx)("li",{children:"• Sin datos hardcodeados"}),(0,r.jsx)("li",{children:"• Actualizacion inmediata al crear tickets"})]})]})]})]})]})]})}}},function(e){e.O(0,[7648,2971,2117,1744],function(){return e(e.s=37465)}),_N_E=e.O()}]);