(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3160],{27125:function(e,a,r){Promise.resolve().then(r.bind(r,74936))},74936:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return l}});var s=r(57437),t=r(2265),i=r(27648);let d="mdayuda_demo_comments",o={id:1,titulo:"Error en el sistema de reportes",descripcion:"El sistema muestra un error al generar reportes mensuales.",clienteNombre:"Cliente Demo",empleadoNombre:"Empleado Demo"};function l(){let[e,a]=(0,t.useState)("Empleado"),[r,l]=(0,t.useState)([]),[n,c]=(0,t.useState)(""),[m,g]=(0,t.useState)([]),[x,p]=(0,t.useState)(!1),[b,u]=(0,t.useState)(""),[h,y]=(0,t.useState)("idle"),j=()=>{try{let e=localStorage.getItem(d);if(e){let a=JSON.parse(e);return l(a),a}}catch(e){console.error("Error loading comments")}return[]},k=e=>{try{localStorage.setItem(d,JSON.stringify(e)),l(e)}catch(e){console.error("Error saving comments")}};(0,t.useEffect)(()=>{j(),u("UNIQUE_COMMENT_TEST_".concat(Date.now()))},[]);let N=e=>new Intl.DateTimeFormat("es-ES",{dateStyle:"medium",timeStyle:"short"}).format(new Date(e)),f=()=>{n.trim()&&(k([...r,{id:Date.now(),ticketId:o.id,texto:n,usuario:{id:"Empleado"===e?2:3,nombre:"Empleado"===e?"Empleado Demo":"Cliente Demo",rol:e},fechaCreacion:new Date().toISOString()}]),c(""))},w=()=>{localStorage.removeItem(d),l([]),g([]),y("idle")},v=e=>{a(e)},E=async()=>{p(!0),await new Promise(e=>setTimeout(e,1e3));let e=j();return p(!1),e},C=async()=>{g([]),y("idle"),w(),await new Promise(e=>setTimeout(e,100));let e=[],r="UNIQUE_COMMENT_TEST_".concat(Date.now());u(r),a("Empleado"),e.push({step:"Paso 1: Login como Empleado",passed:!0,message:"Usuario cambiado a Empleado Demo"}),g([...e]),await new Promise(e=>setTimeout(e,500)),e.push({step:"Paso 2: Abrir ticket",passed:!0,message:"Viendo Ticket #".concat(o.id,": ").concat(o.titulo)}),g([...e]),await new Promise(e=>setTimeout(e,500)),y("step3"),k([{id:Date.now(),ticketId:o.id,texto:r,usuario:{id:2,nombre:"Empleado Demo",rol:"Empleado"},fechaCreacion:new Date().toISOString()}]),e.push({step:"Paso 3: Agregar comentario '".concat(r,"'"),passed:!0,message:"Comentario agregado exitosamente"}),g([...e]),await new Promise(e=>setTimeout(e,500)),y("step4"),p(!0),await new Promise(e=>setTimeout(e,1e3));let s=j();p(!1),e.push({step:"Paso 4: Refrescar pagina",passed:!0,message:"Pagina refrescada, datos recargados desde almacenamiento"}),g([...e]),await new Promise(e=>setTimeout(e,500)),y("step5");let t=s.some(e=>e.texto===r);e.push({step:"Paso 5: Verificar comentario '".concat(r,"' persiste"),passed:t,message:t?"✅ Comentario encontrado despues de refrescar":"❌ Comentario no encontrado despues de refrescar"}),g([...e]),await new Promise(e=>setTimeout(e,500)),y("step6"),a("Cliente"),e.push({step:"Paso 6: Login como Cliente del ticket",passed:!0,message:"Usuario cambiado a Cliente Demo"}),g([...e]),await new Promise(e=>setTimeout(e,500)),y("step7");let i=j().some(e=>e.texto===r);e.push({step:"Paso 7: Verificar mismo comentario visible como Cliente",passed:i,message:i?"✅ El mismo comentario es visible para el Cliente":"❌ El comentario no es visible para el Cliente"}),g([...e]),y("complete")},T=m.length>0&&m.every(e=>e.passed);return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(i.default,{href:"/demo",className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:"MDAyuda"}),(0,s.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Demo: Comment Persistence"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Usuario actual: ",(0,s.jsxs)("strong",{children:[e," Demo"]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>v("Empleado"),className:"px-3 py-1 text-sm rounded-lg transition-colors ".concat("Empleado"===e?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:"Empleado"}),(0,s.jsx)("button",{onClick:()=>v("Cliente"),className:"px-3 py-1 text-sm rounded-lg transition-colors ".concat("Cliente"===e?"bg-green-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"),children:"Cliente"})]})]})]})})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Feature #32: Comments are real and persist"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Esta pagina demuestra que los comentarios se almacenan y persisten entre recargas de pagina y son visibles para diferentes usuarios."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:["Ticket #",o.id,": ",o.titulo]}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:o.descripcion}),(0,s.jsxs)("div",{className:"flex gap-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,s.jsxs)("span",{children:["Cliente: ",o.clienteNombre]}),(0,s.jsxs)("span",{children:["Empleado: ",o.empleadoNombre]})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,s.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Comentarios (",r.length,")"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:E,disabled:x,className:"px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-600 disabled:opacity-50",children:x?"Refrescando...":"Simular Refresh"}),(0,s.jsx)("button",{onClick:w,className:"px-3 py-1 text-sm bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded hover:bg-red-200 dark:hover:bg-red-900/50",children:"Limpiar"})]})]})}),(0,s.jsx)("div",{className:"p-6 space-y-4 max-h-80 overflow-y-auto",children:0===r.length?(0,s.jsx)("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"No hay comentarios aun."}):r.map(e=>(0,s.jsxs)("div",{className:"p-4 rounded-lg ".concat(e.texto.includes("UNIQUE_COMMENT_TEST")?"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800":"bg-gray-50 dark:bg-gray-700"),children:[(0,s.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:e.usuario.nombre}),(0,s.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat("Empleado"===e.usuario.rol?"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"),children:e.usuario.rol})]}),(0,s.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:N(e.fechaCreacion)})]}),(0,s.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:e.texto})]},e.id))}),(0,s.jsx)("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("input",{type:"text",value:n,onChange:e=>c(e.target.value),placeholder:"Escribe un comentario como ".concat(e,"..."),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500 focus:border-transparent",onKeyDown:e=>"Enter"===e.key&&f()}),(0,s.jsx)("button",{onClick:f,disabled:!n.trim(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Enviar"})]})})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Test Automatizado"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Ejecuta todos los pasos del test de la Feature #32 automaticamente."}),(0,s.jsx)("button",{onClick:C,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium",children:"▶️ Ejecutar Test Completo"})]}),m.length>0&&(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Resultados del Test"}),(0,s.jsx)("div",{className:"space-y-3",children:m.map((e,a)=>(0,s.jsxs)("div",{className:"p-3 rounded-lg ".concat(e.passed?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"),children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,s.jsx)("span",{children:e.passed?"✅":"❌"}),(0,s.jsx)("span",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.step})]}),(0,s.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 ml-6",children:e.message})]},a))}),"complete"===h&&(0,s.jsx)("div",{className:"mt-4 p-4 rounded-lg ".concat(T?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"),children:(0,s.jsx)("p",{className:"font-bold text-center ".concat(T?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"),children:T?"\uD83C\uDF89 \xa1Todos los tests pasaron!":"⚠️ Algunos tests fallaron"})})]}),(0,s.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Feature #32: Comments persist"}),(0,s.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-2",children:"Verifica que los comentarios se almacenan correctamente:"}),(0,s.jsxs)("ol",{className:"list-decimal list-inside text-sm text-blue-600 dark:text-blue-400 space-y-1",children:[(0,s.jsx)("li",{children:"Login como Empleado"}),(0,s.jsx)("li",{children:"Abrir un ticket"}),(0,s.jsx)("li",{children:"Agregar comentario unico"}),(0,s.jsx)("li",{children:"Refrescar pagina"}),(0,s.jsx)("li",{children:"Verificar comentario persiste"}),(0,s.jsx)("li",{children:"Login como Cliente"}),(0,s.jsx)("li",{children:"Verificar mismo comentario visible"})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Implementacion"}),(0,s.jsxs)("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[(0,s.jsx)("li",{children:"• Comentarios guardados en localStorage (simula DB)"}),(0,s.jsx)("li",{children:'• Persisten entre "recargas" de pagina'}),(0,s.jsx)("li",{children:"• Visibles para todos los usuarios"}),(0,s.jsx)("li",{children:"• Identificador unico para verificacion"})]})]})]})]})]})]})}}},function(e){e.O(0,[7648,2971,2117,1744],function(){return e(e.s=27125)}),_N_E=e.O()}]);