(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4158],{86859:function(e,a,t){Promise.resolve().then(t.bind(t,81950))},81950:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return n}});var r=t(57437),s=t(2265),d=t(27648);let i="mdayuda_demo_dropdown_categories",l=[{id:1,nombre:"Soporte Tecnico",activa:!0,fechaCreacion:new Date().toISOString()},{id:2,nombre:"Recursos Humanos",activa:!0,fechaCreacion:new Date().toISOString()},{id:3,nombre:"Finanzas",activa:!0,fechaCreacion:new Date().toISOString()}];function n(){let[e,a]=(0,s.useState)([]),[t,n]=(0,s.useState)([]),[c,o]=(0,s.useState)("idle"),[x,m]=(0,s.useState)(""),[g,h]=(0,s.useState)(!1),p=()=>{try{let e=localStorage.getItem(i);if(e){let t=JSON.parse(e);return a(t),t}}catch(e){console.error("Error loading categories")}return u(l),l},u=e=>{try{localStorage.setItem(i,JSON.stringify(e)),a(e)}catch(e){console.error("Error saving categories")}};(0,s.useEffect)(()=>{p()},[]);let b=async()=>{n([]),o("running"),m(""),u(l),await new Promise(e=>setTimeout(e,100));let e=[],a=Date.now(),t="TEMP_CATEGORY_DELETE_".concat(a);e.push({step:"Paso 1: Login como Admin",passed:!0,message:"Usuario autenticado como Administrador"}),n([...e]),await new Promise(e=>setTimeout(e,500));let r={id:a,nombre:t,activa:!0,fechaCreacion:new Date().toISOString()},s=[...l,r];u(s),e.push({step:"Paso 2: Crear categoria '".concat(t,"'"),passed:!0,message:"Categoria #".concat(r.id," creada exitosamente")}),n([...e]),await new Promise(e=>setTimeout(e,500));let d=s.filter(e=>e.activa),i=d.some(e=>e.nombre===t);e.push({step:"Paso 3: Verificar que aparece en dropdown de creacion de ticket",passed:i,message:i?"✅ Categoria '".concat(t,"' aparece en el dropdown (").concat(d.length," categorias activas)"):"❌ Categoria no encontrada en dropdown"}),n([...e]),await new Promise(e=>setTimeout(e,500));let c=s.map(e=>e.id===r.id?{...e,activa:!1}:e);u(c),e.push({step:"Paso 4: Eliminar la categoria",passed:!0,message:"Categoria '".concat(t,"' marcada como inactiva (eliminada)")}),n([...e]),await new Promise(e=>setTimeout(e,500)),h(!0),await new Promise(e=>setTimeout(e,300)),e.push({step:"Paso 5: Ir al formulario de creacion de ticket",passed:!0,message:"Navegando al formulario de creacion de ticket..."}),n([...e]),await new Promise(e=>setTimeout(e,500));let x=c.filter(e=>e.activa),g=x.some(e=>e.nombre===t);e.push({step:"Paso 6: Verificar que '".concat(t,"' ya no esta en dropdown"),passed:!g,message:g?"❌ Error: Categoria eliminada aun aparece en dropdown":"✅ Categoria eliminada no aparece en el dropdown (".concat(x.length," categorias activas)")}),n([...e]),o("complete")},y=t.length>0&&t.every(e=>e.passed),j=e.filter(e=>e.activa);return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,r.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(d.default,{href:"/demo",className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:"MDAyuda"}),(0,r.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Demo: Deleted from Dropdown"})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Usuario: ",(0,r.jsx)("strong",{children:"Admin Demo"})]})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Feature #35: Deleted item removed from related dropdowns"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Esta pagina demuestra que cuando se elimina un item (categoria), este deja de aparecer en los dropdowns relacionados (formulario de ticket)."})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,r.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,r.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Categorias (",e.length," total, ",j.length," activas)"]}),(0,r.jsx)("button",{onClick:()=>{u(l),n([]),o("idle"),m("")},className:"px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:"Reiniciar Datos"})]})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Nombre"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Estado"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"En Dropdown"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No hay categorias."})}):e.map(e=>(0,r.jsxs)("tr",{className:e.activa?"":"bg-red-50 dark:bg-red-900/10 line-through",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",e.id]}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:[e.nombre,e.nombre.includes("TEMP_CATEGORY_DELETE")&&(0,r.jsx)("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",children:"Test"})]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.activa?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"),children:e.activa?"Activa":"Eliminada"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.activa?(0,r.jsx)("span",{className:"text-green-600 dark:text-green-400",children:"✅ Visible"}):(0,r.jsx)("span",{className:"text-red-600 dark:text-red-400",children:"❌ Oculta"})})]},e.id))})]})})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Formulario de Creacion de Ticket (Preview)"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Categoria *"}),(0,r.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500",children:[(0,r.jsx)("option",{value:"",children:"Seleccione una categoria..."}),j.map(e=>(0,r.jsx)("option",{value:e.id,children:e.nombre},e.id))]}),(0,r.jsxs)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:["Mostrando ",j.length," categorias activas en el dropdown"]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Categorias en el Dropdown:"}),(0,r.jsx)("ul",{className:"space-y-1",children:j.map(e=>(0,r.jsxs)("li",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-green-500",children:"✓"}),e.nombre,e.nombre.includes("TEMP_CATEGORY_DELETE")&&(0,r.jsx)("span",{className:"text-xs px-1 py-0.5 rounded bg-yellow-200 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200",children:"Test Category"})]},e.id))}),e.filter(e=>!e.activa).length>0&&(0,r.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[(0,r.jsx)("h5",{className:"text-sm font-medium text-red-600 dark:text-red-400 mb-1",children:"Categorias Eliminadas (NO en dropdown):"}),(0,r.jsx)("ul",{className:"space-y-1",children:e.filter(e=>!e.activa).map(e=>(0,r.jsxs)("li",{className:"text-sm text-red-500 dark:text-red-400 flex items-center gap-2 line-through",children:[(0,r.jsx)("span",{children:"✗"}),e.nombre]},e.id))})]})]})]})]})]}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Test Automatizado"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Ejecuta todos los pasos del test de la Feature #35 automaticamente."}),(0,r.jsx)("button",{onClick:b,disabled:"running"===c,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50",children:"running"===c?"⏳ Ejecutando...":"▶️ Ejecutar Test Completo"})]}),t.length>0&&(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Resultados del Test"}),(0,r.jsx)("div",{className:"space-y-3",children:t.map((e,a)=>(0,r.jsxs)("div",{className:"p-3 rounded-lg ".concat(e.passed?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"),children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,r.jsx)("span",{children:e.passed?"✅":"❌"}),(0,r.jsx)("span",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.step})]}),(0,r.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 ml-6",children:e.message})]},a))}),"complete"===c&&(0,r.jsx)("div",{className:"mt-4 p-4 rounded-lg ".concat(y?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"),children:(0,r.jsx)("p",{className:"font-bold text-center ".concat(y?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"),children:y?"\uD83C\uDF89 \xa1Todos los tests pasaron!":"⚠️ Algunos tests fallaron"})})]}),(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Feature #35: Deleted from Dropdown"}),(0,r.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-2",children:"Verifica que items eliminados no aparecen en dropdowns:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside text-sm text-blue-600 dark:text-blue-400 space-y-1",children:[(0,r.jsx)("li",{children:"Login como Admin"}),(0,r.jsx)("li",{children:"Crear categoria 'TEMP_CATEGORY_DELETE'"}),(0,r.jsx)("li",{children:"Verificar que aparece en dropdown"}),(0,r.jsx)("li",{children:"Eliminar la categoria"}),(0,r.jsx)("li",{children:"Ir al formulario de ticket"}),(0,r.jsx)("li",{children:"Verificar que ya no aparece"})]})]}),(0,r.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"Implementacion"}),(0,r.jsxs)("ul",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[(0,r.jsx)("li",{children:"• Categorias tienen campo 'activa'"}),(0,r.jsx)("li",{children:"• Dropdown filtra por activa=true"}),(0,r.jsx)("li",{children:"• Eliminar = marcar como inactiva"}),(0,r.jsx)("li",{children:"• Items eliminados ocultos inmediatamente"})]})]})]})]})]})]})}}},function(e){e.O(0,[7648,2971,2117,1744],function(){return e(e.s=86859)}),_N_E=e.O()}]);