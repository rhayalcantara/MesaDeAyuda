(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8108],{17202:function(e,a,t){Promise.resolve().then(t.bind(t,50681))},99376:function(e,a,t){"use strict";var r=t(35475);t.o(r,"useParams")&&t.d(a,{useParams:function(){return r.useParams}}),t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},50681:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return n}});var r=t(57437),s=t(2265),o=t(27648),d=t(99376);let i=[{id:1,titulo:"Error al cargar reportes en el sistema",estado:"EnProceso",prioridad:"Alta",categoria:"Sistema de Ventas",clienteNombre:"Cliente Demo",empleadoNombre:"Empleado Demo",fechaCreacion:new Date(Date.now()-1728e5).toISOString()},{id:2,titulo:"No puedo acceder al portal web",estado:"Abierto",prioridad:"Media",categoria:"Portal Web",clienteNombre:"Juan Perez",empleadoNombre:null,fechaCreacion:new Date(Date.now()-864e5).toISOString()},{id:3,titulo:"Solicitud de nueva funcionalidad",estado:"EnEspera",prioridad:"Baja",categoria:"Aplicacion Movil",clienteNombre:"Maria Garcia",empleadoNombre:"Admin Demo",fechaCreacion:new Date(Date.now()-432e6).toISOString()},{id:4,titulo:"Problema con facturacion electronica",estado:"Abierto",prioridad:"Alta",categoria:"Facturacion",clienteNombre:"Carlos Rodriguez",empleadoNombre:null,fechaCreacion:new Date(Date.now()-2592e5).toISOString()},{id:5,titulo:"Error en sincronizacion de inventario",estado:"EnProceso",prioridad:"Media",categoria:"Inventario",clienteNombre:"Ana Martinez",empleadoNombre:"Empleado Demo",fechaCreacion:new Date(Date.now()-3456e5).toISOString()},{id:6,titulo:"Solicitud de capacitacion",estado:"Resuelto",prioridad:"Baja",categoria:"Soporte",clienteNombre:"Luis Fernandez",empleadoNombre:"Admin Demo",fechaCreacion:new Date(Date.now()-864e6).toISOString()},{id:7,titulo:"Cambio de contrasena no funciona",estado:"Abierto",prioridad:"Alta",categoria:"Seguridad",clienteNombre:"Rosa Lopez",empleadoNombre:null,fechaCreacion:new Date(Date.now()-864e5).toISOString()},{id:8,titulo:"Reporte de ventas incorrecto",estado:"EnEspera",prioridad:"Media",categoria:"Reportes",clienteNombre:"Pedro Sanchez",empleadoNombre:"Empleado Demo",fechaCreacion:new Date(Date.now()-5184e5).toISOString()}];function n(){(0,d.useRouter)();let e=(0,d.useSearchParams)(),[a,t]=(0,s.useState)(e.get("estado")||""),[n,l]=(0,s.useState)(e.get("prioridad")||""),[c,x]=(0,s.useState)(e.get("busqueda")||""),[u,g]=(0,s.useState)(e.get("orden")||"desc"),[m,p]=(0,s.useState)(1);(0,s.useEffect)(()=>{let e=new URLSearchParams;a&&e.set("estado",a),n&&e.set("prioridad",n),c&&e.set("busqueda",c),u&&e.set("orden",u);let t=e.toString();window.history.replaceState(null,"",t?"?".concat(t):"/demo/admin-tickets")},[a,n,c,u]);let h=i.filter(e=>(!a||e.estado===a)&&(!n||e.prioridad===n)&&(!c||!!e.titulo.toLowerCase().includes(c.toLowerCase()))),b=[...h].sort((e,a)=>{let t=new Date(e.fechaCreacion).getTime(),r=new Date(a.fechaCreacion).getTime();return"asc"===u?t-r:r-t}),y=e=>({Abierto:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",EnProceso:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",EnEspera:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",Resuelto:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",Cerrado:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"})[e]||"bg-gray-100 text-gray-800",k=e=>({Alta:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",Media:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",Baja:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"})[e]||"bg-gray-100 text-gray-800",w=e=>({Abierto:"Abierto",EnProceso:"En Proceso",EnEspera:"En Espera",Resuelto:"Resuelto",Cerrado:"Cerrado"})[e]||e;return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Demo - Lista de Tickets con Filtros"}),(0,r.jsx)(o.default,{href:"/demo",className:"text-blue-600 hover:text-blue-800 dark:text-blue-400",children:"Volver a Demo"})]}),(0,r.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-800 dark:text-blue-200",children:"Feature #69: Filter state preserved when returning to list"}),(0,r.jsx)("p",{className:"text-blue-700 dark:text-blue-300 text-sm mt-1",children:"Los filtros se guardan en la URL. Al hacer clic en un ticket y volver con el boton atras, los filtros se mantienen aplicados."})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Buscar"}),(0,r.jsx)("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Buscar por titulo...",value:c,onChange:e=>x(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estado"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:a,onChange:e=>t(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Todos"}),(0,r.jsx)("option",{value:"Abierto",children:"Abierto"}),(0,r.jsx)("option",{value:"EnProceso",children:"En Proceso"}),(0,r.jsx)("option",{value:"EnEspera",children:"En Espera"}),(0,r.jsx)("option",{value:"Resuelto",children:"Resuelto"}),(0,r.jsx)("option",{value:"Cerrado",children:"Cerrado"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prioridad"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:n,onChange:e=>l(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Todas"}),(0,r.jsx)("option",{value:"Alta",children:"Alta"}),(0,r.jsx)("option",{value:"Media",children:"Media"}),(0,r.jsx)("option",{value:"Baja",children:"Baja"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Ordenar por Fecha"}),(0,r.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:u,onChange:e=>g(e.target.value),children:[(0,r.jsx)("option",{value:"desc",children:"Mas recientes primero"}),(0,r.jsx)("option",{value:"asc",children:"Mas antiguos primero"})]})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsx)("button",{className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-600 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-300 dark:hover:bg-gray-500 transition-colors",onClick:()=>{t(""),l(""),x(""),g("desc")},children:"Limpiar Filtros"})})]}),(0,r.jsxs)("div",{className:"mt-4 text-sm text-gray-600 dark:text-gray-400",children:["Filtros activos:",a&&(0,r.jsxs)("span",{className:"ml-2 px-2 py-1 bg-blue-100 dark:bg-blue-900 rounded",children:["Estado: ",w(a)]}),n&&(0,r.jsxs)("span",{className:"ml-2 px-2 py-1 bg-yellow-100 dark:bg-yellow-900 rounded",children:["Prioridad: ",n]}),c&&(0,r.jsxs)("span",{className:"ml-2 px-2 py-1 bg-green-100 dark:bg-green-900 rounded",children:["Busqueda: ",c]}),!a&&!n&&!c&&(0,r.jsx)("span",{className:"ml-2",children:"Ninguno"})]})]}),(0,r.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Titulo"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Prioridad"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:(0,r.jsxs)("button",{onClick:()=>g("asc"===u?"desc":"asc"),className:"flex items-center gap-1 hover:text-gray-700 dark:hover:text-white",children:["Fecha",(0,r.jsx)("span",{className:"text-blue-500",children:"asc"===u?"↑":"↓"})]})}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Cliente"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:0===b.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No hay tickets que coincidan con los filtros"})}):b.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",e.id]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white max-w-xs truncate",children:e.titulo}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(y(e.estado)),children:w(e.estado)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(k(e.prioridad)),children:e.prioridad})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.fechaCreacion).toLocaleDateString("es-ES",{day:"2-digit",month:"short",year:"numeric"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.clienteNombre}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,r.jsx)(o.default,{href:"/demo/admin-tickets/".concat(e.id,"?returnUrl=").concat(encodeURIComponent("/demo/admin-tickets?estado=".concat(a,"&prioridad=").concat(n,"&busqueda=").concat(c,"&orden=").concat(u))),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"Ver detalle"})})]},e.id))})]})}),(0,r.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700",children:(0,r.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Mostrando ",h.length," de ",i.length," tickets"]})})]})]})})}}},function(e){e.O(0,[7648,2971,2117,1744],function(){return e(e.s=17202)}),_N_E=e.O()}]);