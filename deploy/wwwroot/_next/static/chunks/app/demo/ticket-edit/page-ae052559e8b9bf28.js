(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6440],{48378:function(e,a,r){Promise.resolve().then(r.bind(r,12391))},12391:function(e,a,r){"use strict";r.r(a),r.d(a,{default:function(){return o}});var t=r(57437),s=r(2265),d=r(27648);let i="mdayuda_demo_edit_ticket",l={id:1,titulo:"Error en el sistema de reportes",descripcion:"Al generar reportes mensuales el sistema muestra timeout.",prioridad:"Media",estado:"Abierto",categoria:"Sistema de Ventas",fechaCreacion:new Date(Date.now()-1728e5).toISOString(),fechaActualizacion:new Date(Date.now()-1728e5).toISOString()};function o(){let[e,a]=(0,s.useState)(l),[r,o]=(0,s.useState)(!1),[c,n]=(0,s.useState)({}),[x,g]=(0,s.useState)(!1),[m,u]=(0,s.useState)(""),[b,h]=(0,s.useState)([]),[p,y]=(0,s.useState)("idle"),j=()=>{try{let e=localStorage.getItem(i);if(e){let r=JSON.parse(e);return a(r),r}}catch(e){console.error("Error loading ticket")}return k(l),l},k=e=>{try{localStorage.setItem(i,JSON.stringify(e)),a(e)}catch(e){console.error("Error saving ticket")}};(0,s.useEffect)(()=>{j()},[]);let N=e=>new Intl.DateTimeFormat("es-ES",{dateStyle:"medium",timeStyle:"short"}).format(new Date(e)),w=()=>{n({titulo:e.titulo,descripcion:e.descripcion,prioridad:e.prioridad,estado:e.estado}),o(!0),u("")},v=async()=>{g(!0),await new Promise(e=>setTimeout(e,1e3)),k({...e,...c,fechaActualizacion:new Date().toISOString()}),g(!1),o(!1),n({}),u("Cambios guardados exitosamente!")},f=async()=>{h([]),y("running"),u(""),o(!1),k(l),await new Promise(e=>setTimeout(e,100));let e=[];e.push({step:"Paso 1: Login como Admin",passed:!0,message:"Usuario autenticado como Administrador"}),h([...e]),await new Promise(e=>setTimeout(e,500));let a=j();e.push({step:"Paso 2: Ir al detalle del ticket",passed:!0,message:"Viendo Ticket #".concat(a.id,": ").concat(a.titulo)}),h([...e]),await new Promise(e=>setTimeout(e,500)),w(),e.push({step:"Paso 3: Click en Editar",passed:!0,message:"Modo de edicion activado"}),h([...e]),await new Promise(e=>setTimeout(e,500));let r=a.prioridad,t="Alta"===r?"Baja":"Alta";n(e=>({...e,prioridad:t})),e.push({step:"Paso 4: Cambiar la prioridad",passed:!0,message:"Prioridad cambiada de '".concat(r,"' a '").concat(t,"'")}),h([...e]),await new Promise(e=>setTimeout(e,500)),g(!0),await new Promise(e=>setTimeout(e,1e3)),k({...a,prioridad:t,fechaActualizacion:new Date().toISOString()}),g(!1),o(!1),e.push({step:"Paso 5: Guardar cambios",passed:!0,message:"Cambios guardados en la base de datos"}),h([...e]),await new Promise(e=>setTimeout(e,500)),u("Cambios guardados exitosamente!"),e.push({step:"Paso 6: Verificar mensaje de exito",passed:!0,message:"✅ Mensaje de exito mostrado correctamente"}),h([...e]),await new Promise(e=>setTimeout(e,500));let s=j(),d=s.prioridad===t;e.push({step:"Paso 7: Verificar que los cambios persistieron",passed:d,message:d?"✅ Prioridad verificada: '".concat(s.prioridad,"' (cambiado desde '").concat(r,"')"):"❌ Error: Prioridad esperada '".concat(t,"', actual '").concat(s.prioridad,"'")}),h([...e]),y("complete")},C=b.length>0&&b.every(e=>e.passed);return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,t.jsx)("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(d.default,{href:"/demo",className:"text-xl font-bold text-primary-600 dark:text-primary-400",children:"MDAyuda"}),(0,t.jsx)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Demo: Ticket Edit"})]}),(0,t.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Usuario: ",(0,t.jsx)("strong",{children:"Admin Demo"})]})]})})}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Feature #38: Ticket Update operation via edit form"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Esta pagina demuestra el flujo completo de edicion de un ticket, incluyendo la persistencia de cambios."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[m&&(0,t.jsx)("div",{className:"bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-800 rounded-lg p-4",children:(0,t.jsxs)("p",{className:"text-green-700 dark:text-green-300 font-medium",children:["✅ ",m]})}),(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[(0,t.jsx)("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:["Ticket #",e.id]}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:["Creado: ",N(e.fechaCreacion)]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>{k(l),o(!1),n({}),u(""),h([]),y("idle")},className:"px-3 py-1 text-sm bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-300 dark:hover:bg-gray-600",children:"Reiniciar"}),!r&&(0,t.jsx)("button",{onClick:w,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700",children:"Editar"})]})]})}),(0,t.jsx)("div",{className:"p-6",children:r?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Titulo"}),(0,t.jsx)("input",{type:"text",value:c.titulo||"",onChange:e=>n({...c,titulo:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Descripcion"}),(0,t.jsx)("textarea",{value:c.descripcion||"",onChange:e=>n({...c,descripcion:e.target.value}),rows:3,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prioridad"}),(0,t.jsxs)("select",{value:c.prioridad||"Media",onChange:e=>n({...c,prioridad:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,t.jsx)("option",{value:"Alta",children:"Alta"}),(0,t.jsx)("option",{value:"Media",children:"Media"}),(0,t.jsx)("option",{value:"Baja",children:"Baja"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estado"}),(0,t.jsxs)("select",{value:c.estado||"Abierto",onChange:e=>n({...c,estado:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,t.jsx)("option",{value:"Abierto",children:"Abierto"}),(0,t.jsx)("option",{value:"EnProceso",children:"En Proceso"}),(0,t.jsx)("option",{value:"Resuelto",children:"Resuelto"}),(0,t.jsx)("option",{value:"Cerrado",children:"Cerrado"})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)("button",{onClick:v,disabled:x,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50",children:x?"Guardando...":"Guardar cambios"}),(0,t.jsx)("button",{onClick:()=>{o(!1),n({})},disabled:x,className:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600",children:"Cancelar"})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{children:(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:e.titulo})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({Alta:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300",Media:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",Baja:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"}[e.prioridad]||"bg-gray-100 text-gray-700"),children:e.prioridad}),(0,t.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({Abierto:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",EnProceso:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",Resuelto:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",Cerrado:"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}[e.estado]||"bg-gray-100 text-gray-700"),children:e.estado})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Descripcion:"}),(0,t.jsx)("p",{className:"text-gray-700 dark:text-gray-300",children:e.descripcion})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Categoria"}),(0,t.jsx)("p",{className:"text-gray-900 dark:text-white",children:e.categoria})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ultima actualizacion"}),(0,t.jsx)("p",{className:"text-gray-900 dark:text-white",children:N(e.fechaActualizacion)})]})]})]})})]})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Test Automatizado"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Ejecuta todos los pasos del test de la Feature #38 automaticamente."}),(0,t.jsx)("button",{onClick:f,disabled:"running"===p,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-medium disabled:opacity-50",children:"running"===p?"⏳ Ejecutando...":"▶️ Ejecutar Test Completo"})]}),b.length>0&&(0,t.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Resultados del Test"}),(0,t.jsx)("div",{className:"space-y-3",children:b.map((e,a)=>(0,t.jsxs)("div",{className:"p-3 rounded-lg ".concat(e.passed?"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800":"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{children:e.passed?"✅":"❌"}),(0,t.jsx)("span",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.step})]}),(0,t.jsx)("p",{className:"text-xs text-gray-600 dark:text-gray-400 ml-6",children:e.message})]},a))}),"complete"===p&&(0,t.jsx)("div",{className:"mt-4 p-4 rounded-lg ".concat(C?"bg-green-100 dark:bg-green-900/30":"bg-red-100 dark:bg-red-900/30"),children:(0,t.jsx)("p",{className:"font-bold text-center ".concat(C?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"),children:C?"\uD83C\uDF89 \xa1Todos los tests pasaron!":"⚠️ Algunos tests fallaron"})})]}),(0,t.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-2",children:"Feature #38: Ticket Update"}),(0,t.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-400 mb-2",children:"Verifica el flujo completo de edicion:"}),(0,t.jsxs)("ol",{className:"list-decimal list-inside text-sm text-blue-600 dark:text-blue-400 space-y-1",children:[(0,t.jsx)("li",{children:"Login como Admin"}),(0,t.jsx)("li",{children:"Ir al detalle del ticket"}),(0,t.jsx)("li",{children:"Click en Editar"}),(0,t.jsx)("li",{children:"Cambiar la prioridad"}),(0,t.jsx)("li",{children:"Guardar cambios"}),(0,t.jsx)("li",{children:"Verificar mensaje de exito"}),(0,t.jsx)("li",{children:"Verificar cambios persistidos"})]})]})]})]})]})]})}}},function(e){e.O(0,[7648,2971,2117,1744],function(){return e(e.s=48378)}),_N_E=e.O()}]);