(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4338],{76725:function(e,t,a){Promise.resolve().then(a.bind(a,56886))},56886:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var r=a(57437),s=a(2265),l=a(11888),d=a(27648),n=a(71837);function i(){let[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)(!0),[c,x]=(0,s.useState)(""),[o,p]=(0,s.useState)(""),[g,u]=(0,s.useState)("");(0,s.useEffect)(()=>{let e=new AbortController,a=!0;return(async()=>{try{let r=new URLSearchParams;c&&r.append("estado",c),o&&r.append("prioridad",o),g&&r.append("busqueda",g);let s=await n.ZP.get("/tickets?".concat(r),{signal:e.signal});if(!a)return;t(s.data.items)}catch(e){if(e instanceof Error&&"AbortError"===e.name){console.log("Request aborted - user navigated away");return}if(!a)return;console.error("Error fetching tickets:",e)}finally{a&&i(!1)}})(),()=>{a=!1,e.abort()}},[c,o,g]);let h=e=>({Abierto:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",EnProceso:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",EnEspera:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",Resuelto:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",Cerrado:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"})[e]||"bg-gray-100 text-gray-800",m=e=>({Alta:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",Media:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",Baja:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"})[e]||"bg-gray-100 text-gray-800",y=e=>({Abierto:"Abierto",EnProceso:"En Proceso",EnEspera:"En Espera",Resuelto:"Resuelto",Cerrado:"Cerrado"})[e]||e;return(0,r.jsx)(l.Zn,{requiredRoles:["Admin","Empleado"],children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Todos los Tickets"})}),(0,r.jsx)("div",{className:"card p-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Buscar"}),(0,r.jsx)("input",{type:"text",className:"input w-full",placeholder:"Buscar por titulo...",value:g,onChange:e=>u(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estado"}),(0,r.jsxs)("select",{className:"input w-full",value:c,onChange:e=>x(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Todos"}),(0,r.jsx)("option",{value:"Abierto",children:"Abierto"}),(0,r.jsx)("option",{value:"EnProceso",children:"En Proceso"}),(0,r.jsx)("option",{value:"EnEspera",children:"En Espera"}),(0,r.jsx)("option",{value:"Resuelto",children:"Resuelto"}),(0,r.jsx)("option",{value:"Cerrado",children:"Cerrado"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prioridad"}),(0,r.jsxs)("select",{className:"input w-full",value:o,onChange:e=>p(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Todas"}),(0,r.jsx)("option",{value:"Alta",children:"Alta"}),(0,r.jsx)("option",{value:"Media",children:"Media"}),(0,r.jsx)("option",{value:"Baja",children:"Baja"})]})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsx)("button",{className:"btn-secondary w-full",onClick:()=>{x(""),p(""),u("")},children:"Limpiar Filtros"})})]})}),(0,r.jsx)("div",{className:"card overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Titulo"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Prioridad"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Cliente"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Asignado a"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fecha"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:a?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"Cargando..."})}):0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No hay tickets para mostrar"})}):e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",e.id]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white max-w-xs truncate",title:e.titulo,children:e.titulo}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(h(e.estado)),children:y(e.estado)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(m(e.prioridad)),children:e.prioridad})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 max-w-[150px] truncate",children:e.clienteNombre}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.empleadoAsignadoNombre||"Sin asignar"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.fechaCreacion).toLocaleDateString("es-ES")}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,r.jsx)(d.default,{href:"/empleado/tickets/".concat(e.id),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"Ver detalle"})})]},e.id))})]})})})]})})}},11888:function(e,t,a){"use strict";a.d(t,{Zn:function(){return r.Z}}),a(42530),a(57018);var r=a(81076)}},function(e){e.O(0,[7648,7859,3464,6137,1076,2971,2117,1744],function(){return e(e.s=76725)}),_N_E=e.O()}]);