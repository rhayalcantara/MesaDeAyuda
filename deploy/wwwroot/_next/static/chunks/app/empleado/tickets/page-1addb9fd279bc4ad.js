(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4338],{76725:function(e,t,a){Promise.resolve().then(a.bind(a,56886))},56886:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var r=a(57437),i=a(2265),s=a(11888),o=a(27648),l=a(71837);let n=[{id:1,titulo:"Error al cargar reportes en el sistema",estado:"EnProceso",prioridad:"Alta",categoriaNombre:"Sistema de Ventas",clienteNombre:"Cliente Demo",empleadoAsignadoNombre:"Empleado Demo",fechaCreacion:new Date(Date.now()-1728e5).toISOString()},{id:2,titulo:"No puedo acceder al portal web",estado:"Abierto",prioridad:"Media",categoriaNombre:"Portal Web",clienteNombre:"Juan Perez",empleadoAsignadoNombre:null,fechaCreacion:new Date(Date.now()-864e5).toISOString()},{id:3,titulo:"Solicitud de nueva funcionalidad",estado:"EnEspera",prioridad:"Baja",categoriaNombre:"Aplicacion Movil",clienteNombre:"Maria Garcia",empleadoAsignadoNombre:"Admin Demo",fechaCreacion:new Date(Date.now()-432e6).toISOString()},{id:4,titulo:"Problema con facturacion electronica",estado:"Abierto",prioridad:"Alta",categoriaNombre:"Facturacion",clienteNombre:"Carlos Rodriguez",empleadoAsignadoNombre:null,fechaCreacion:new Date(Date.now()-2592e5).toISOString()},{id:5,titulo:"Error en sincronizacion de inventario",estado:"EnProceso",prioridad:"Media",categoriaNombre:"Inventario",clienteNombre:"Ana Martinez",empleadoAsignadoNombre:"Empleado Demo",fechaCreacion:new Date(Date.now()-3456e5).toISOString()}];function d(){let[e,t]=(0,i.useState)([]),[a,d]=(0,i.useState)(!0),[c,x]=(0,i.useState)(""),[p,g]=(0,i.useState)(""),[m,u]=(0,i.useState)("");(0,i.useEffect)(()=>{let e=new AbortController,a=!0;return(async()=>{try{let r=new URLSearchParams;c&&r.append("estado",c),p&&r.append("prioridad",p),m&&r.append("busqueda",m);let i=await l.ZP.get("/tickets?".concat(r),{signal:e.signal});if(!a)return;t(i.data.items)}catch(e){if(e instanceof Error&&"AbortError"===e.name){console.log("Request aborted - user navigated away");return}if(!a)return;console.error("Error fetching tickets:",e),console.log("Using demo tickets (API not available)"),t(h())}finally{a&&d(!1)}})(),()=>{a=!1,e.abort()}},[c,p,m]);let h=()=>{let e=[...n];if(c&&(e=e.filter(e=>e.estado===c)),p&&(e=e.filter(e=>e.prioridad===p)),m){let t=m.toLowerCase();e=e.filter(e=>e.titulo.toLowerCase().includes(t))}return e},y=e=>({Abierto:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",EnProceso:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",EnEspera:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",Resuelto:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",Cerrado:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"})[e]||"bg-gray-100 text-gray-800",b=e=>({Alta:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",Media:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",Baja:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"})[e]||"bg-gray-100 text-gray-800",f=e=>({Abierto:"Abierto",EnProceso:"En Proceso",EnEspera:"En Espera",Resuelto:"Resuelto",Cerrado:"Cerrado"})[e]||e;return(0,r.jsx)(s.Zn,{requiredRoles:["Admin","Empleado"],children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Todos los Tickets"})}),(0,r.jsx)("div",{className:"card p-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Buscar"}),(0,r.jsx)("input",{type:"text",className:"input w-full",placeholder:"Buscar por titulo...",value:m,onChange:e=>u(e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Estado"}),(0,r.jsxs)("select",{className:"input w-full",value:c,onChange:e=>x(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Todos"}),(0,r.jsx)("option",{value:"Abierto",children:"Abierto"}),(0,r.jsx)("option",{value:"EnProceso",children:"En Proceso"}),(0,r.jsx)("option",{value:"EnEspera",children:"En Espera"}),(0,r.jsx)("option",{value:"Resuelto",children:"Resuelto"}),(0,r.jsx)("option",{value:"Cerrado",children:"Cerrado"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Prioridad"}),(0,r.jsxs)("select",{className:"input w-full",value:p,onChange:e=>g(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Todas"}),(0,r.jsx)("option",{value:"Alta",children:"Alta"}),(0,r.jsx)("option",{value:"Media",children:"Media"}),(0,r.jsx)("option",{value:"Baja",children:"Baja"})]})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsx)("button",{className:"btn-secondary w-full",onClick:()=>{x(""),g(""),u("")},children:"Limpiar Filtros"})})]})}),(0,r.jsx)("div",{className:"card overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Titulo"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Prioridad"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Cliente"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Asignado a"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fecha"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:a?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"Cargando..."})}):0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:8,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No hay tickets para mostrar"})}):e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",e.id]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white max-w-xs truncate",title:e.titulo,children:e.titulo}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(y(e.estado)),children:f(e.estado)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(b(e.prioridad)),children:e.prioridad})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 max-w-[150px] truncate",children:e.clienteNombre}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.empleadoAsignadoNombre||"Sin asignar"}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.fechaCreacion).toLocaleDateString("es-ES")}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,r.jsx)(o.default,{href:"/empleado/tickets/".concat(e.id),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"Ver detalle"})})]},e.id))})]})})})]})})}},11888:function(e,t,a){"use strict";a.d(t,{Zn:function(){return r.Z}}),a(42530),a(57018);var r=a(81076)}},function(e){e.O(0,[7648,7859,3464,6137,1076,2971,2117,1744],function(){return e(e.s=76725)}),_N_E=e.O()}]);