(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2319],{57545:function(e,t,a){Promise.resolve().then(a.bind(a,80483))},80483:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var r=a(57437),s=a(2265),d=a(11888),l=a(71245),i=a(27648),n=a(71837);function x(){let{user:e}=(0,l.a)(),[t,a]=(0,s.useState)([]),[x,c]=(0,s.useState)(!0),[o,g]=(0,s.useState)("");(0,s.useEffect)(()=>{e&&p()},[e,o]);let p=async()=>{try{let e=new URLSearchParams;o&&e.append("estado",o);let t=await n.ZP.get("/tickets/mis-tickets?".concat(e));a(t.data.items||t.data)}catch(e){console.error("Error fetching mis tickets:",e)}finally{c(!1)}},h=e=>({Abierto:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",EnProceso:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",EnEspera:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",Resuelto:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",Cerrado:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300"})[e]||"bg-gray-100 text-gray-800",m=e=>({Alta:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",Media:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",Baja:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"})[e]||"bg-gray-100 text-gray-800",y=e=>({Abierto:"Abierto",EnProceso:"En Proceso",EnEspera:"En Espera",Resuelto:"Resuelto",Cerrado:"Cerrado"})[e]||e;return(0,r.jsx)(d.Zn,{requiredRoles:["Admin","Empleado"],children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("div",{className:"flex justify-between items-center",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Mis Tickets"}),(0,r.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Tickets asignados a ti"})]})}),(0,r.jsx)("div",{className:"card p-4",children:(0,r.jsx)("div",{className:"flex flex-wrap items-center gap-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Filtrar por estado"}),(0,r.jsxs)("select",{className:"input w-48",value:o,onChange:e=>g(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Todos"}),(0,r.jsx)("option",{value:"EnProceso",children:"En Proceso"}),(0,r.jsx)("option",{value:"EnEspera",children:"En Espera"}),(0,r.jsx)("option",{value:"Resuelto",children:"Resuelto"})]})]})})}),(0,r.jsx)("div",{className:"card overflow-hidden",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"ID"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Titulo"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Estado"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Prioridad"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Cliente"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fecha"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Acciones"})]})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:x?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"Cargando..."})}):0===t.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:(0,r.jsxs)("div",{className:"flex flex-col items-center py-8",children:[(0,r.jsx)("svg",{className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),(0,r.jsx)("p",{className:"mt-2",children:"No tienes tickets asignados"}),(0,r.jsx)(i.default,{href:"/empleado/sin-asignar",className:"mt-4 text-blue-600 hover:text-blue-800 dark:text-blue-400",children:"Ver tickets sin asignar"})]})})}):t.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["#",e.id]}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white max-w-xs truncate",title:e.titulo,children:e.titulo}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(h(e.estado)),children:y(e.estado)})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(m(e.prioridad)),children:e.prioridad})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400 max-w-[150px] truncate",children:e.clienteNombre}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(e.fechaCreacion).toLocaleDateString("es-ES")}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,r.jsx)(i.default,{href:"/empleado/tickets/".concat(e.id),className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",children:"Ver detalle"})})]},e.id))})]})})})]})})}},11888:function(e,t,a){"use strict";a.d(t,{Zn:function(){return r.Z}}),a(42530),a(57018);var r=a(81076)}},function(e){e.O(0,[7648,7859,3464,6137,1076,2971,2117,1744],function(){return e(e.s=57545)}),_N_E=e.O()}]);